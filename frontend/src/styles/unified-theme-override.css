/* ===== 统一全局主题覆盖系统 ===== */
/* 确保所有Element Plus组件在暗黑主题下都正确显示 */

/* ===== 全局对话框系统 ===== */

/* 所有对话框容器 */
[data-theme="dark"] .el-dialog {
  background-color: var(--bg-primary) !important;
  color: var(--text-primary) !important;
  border: 1px solid var(--border-primary) !important;
}

[data-theme="dark"] .el-dialog__header {
  background-color: var(--bg-primary) !important;
  color: var(--text-primary) !important;
  border-bottom-color: var(--border-tertiary) !important;
}

[data-theme="dark"] .el-dialog__body {
  background-color: var(--bg-primary) !important;
  color: var(--text-primary) !important;
}

[data-theme="dark"] .el-dialog__footer {
  background-color: var(--bg-primary) !important;
  border-top-color: var(--border-tertiary) !important;
}

[data-theme="dark"] .el-dialog__title {
  color: var(--text-primary) !important;
}

/* ===== MessageBox 确认对话框 ===== */

[data-theme="dark"] .el-message-box {
  background-color: var(--bg-primary) !important;
  border-color: var(--border-primary) !important;
  color: var(--text-primary) !important;
}

[data-theme="dark"] .el-message-box__header {
  background-color: var(--bg-primary) !important;
  color: var(--text-primary) !important;
}

[data-theme="dark"] .el-message-box__title {
  color: var(--text-primary) !important;
}

[data-theme="dark"] .el-message-box__content {
  background-color: var(--bg-primary) !important;
  color: var(--text-primary) !important;
}

[data-theme="dark"] .el-message-box__message {
  color: var(--text-primary) !important;
}

[data-theme="dark"] .el-message-box__btns {
  background-color: var(--bg-primary) !important;
}

/* ===== 全局表单系统 ===== */

/* 表单容器 */
[data-theme="dark"] .el-form {
  background-color: var(--bg-primary) !important;
  color: var(--text-primary) !important;
}

[data-theme="dark"] .el-form-item {
  background-color: var(--bg-primary) !important;
}

[data-theme="dark"] .el-form-item__label {
  color: var(--text-primary) !important;
  background-color: var(--bg-primary) !important;
  font-weight: 500 !important;
}

[data-theme="dark"] .el-form-item__content {
  background-color: var(--bg-primary) !important;
}

/* ===== 全局输入框系统 ===== */

/* 所有输入框 */
[data-theme="dark"] .el-input {
  background-color: var(--bg-primary) !important;
}

[data-theme="dark"] .el-input__wrapper {
  background-color: var(--bg-primary) !important;
  border-color: var(--border-primary) !important;
  box-shadow: 0 0 0 1px var(--border-primary) inset !important;
}

[data-theme="dark"] .el-input__wrapper:hover {
  border-color: var(--border-secondary) !important;
  box-shadow: 0 0 0 1px var(--border-secondary) inset !important;
}

[data-theme="dark"] .el-input__wrapper.is-focus {
  border-color: var(--primary) !important;
  box-shadow: 0 0 0 1px var(--primary) inset !important;
}

[data-theme="dark"] .el-input__inner {
  background-color: var(--bg-primary) !important;
  color: var(--text-primary) !important;
}

[data-theme="dark"] .el-input__inner::placeholder {
  color: var(--text-quaternary) !important;
}

[data-theme="dark"] .el-input__suffix {
  background-color: var(--bg-primary) !important;
  color: var(--text-secondary) !important;
}

[data-theme="dark"] .el-input__prefix {
  background-color: var(--bg-primary) !important;
  color: var(--text-secondary) !important;
}

/* 文本域 */
[data-theme="dark"] .el-textarea {
  background-color: var(--bg-primary) !important;
}

[data-theme="dark"] .el-textarea__inner {
  background-color: var(--bg-primary) !important;
  border-color: var(--border-primary) !important;
  color: var(--text-primary) !important;
}

[data-theme="dark"] .el-textarea__inner:hover {
  border-color: var(--border-secondary) !important;
}

[data-theme="dark"] .el-textarea__inner:focus {
  border-color: var(--primary) !important;
}

/* ===== 全局选择器系统 ===== */

[data-theme="dark"] .el-select {
  background-color: var(--bg-primary) !important;
}

[data-theme="dark"] .el-select .el-input__wrapper {
  background-color: var(--bg-primary) !important;
  border-color: var(--border-primary) !important;
}

[data-theme="dark"] .el-select .el-input__inner {
  background-color: var(--bg-primary) !important;
  color: var(--text-primary) !important;
}

[data-theme="dark"] .el-select-dropdown {
  background-color: var(--bg-overlay) !important;
  border-color: var(--border-primary) !important;
  box-shadow: var(--shadow-base) !important;
}

[data-theme="dark"] .el-select-dropdown__item {
  background-color: transparent !important;
  color: var(--text-secondary) !important;
}

[data-theme="dark"] .el-select-dropdown__item:hover {
  background-color: var(--fill-primary) !important;
}

[data-theme="dark"] .el-select-dropdown__item.selected {
  color: var(--primary) !important;
  background-color: var(--fill-secondary) !important;
}

/* ===== 全局单选框和复选框 ===== */

[data-theme="dark"] .el-radio {
  background-color: var(--bg-primary) !important;
}

[data-theme="dark"] .el-radio__label {
  color: var(--text-secondary) !important;
  background-color: var(--bg-primary) !important;
}

[data-theme="dark"] .el-radio__inner {
  background-color: var(--bg-primary) !important;
  border-color: var(--border-primary) !important;
}

[data-theme="dark"] .el-radio__input.is-checked .el-radio__inner {
  background-color: var(--primary) !important;
  border-color: var(--primary) !important;
}

[data-theme="dark"] .el-checkbox {
  background-color: var(--bg-primary) !important;
}

[data-theme="dark"] .el-checkbox__label {
  color: var(--text-secondary) !important;
  background-color: var(--bg-primary) !important;
}

[data-theme="dark"] .el-checkbox__inner {
  background-color: var(--bg-primary) !important;
  border-color: var(--border-primary) !important;
}

[data-theme="dark"] .el-checkbox__input.is-checked .el-checkbox__inner {
  background-color: var(--primary) !important;
  border-color: var(--primary) !important;
}

/* ===== 全局标签页系统 ===== */

[data-theme="dark"] .el-tabs {
  background-color: var(--bg-primary) !important;
}

[data-theme="dark"] .el-tabs__header {
  background-color: var(--bg-primary) !important;
  border-bottom-color: var(--border-primary) !important;
}

[data-theme="dark"] .el-tabs__nav {
  background-color: var(--bg-primary) !important;
}

[data-theme="dark"] .el-tabs__item {
  background-color: var(--bg-primary) !important;
  color: var(--text-secondary) !important;
  border-color: var(--border-primary) !important;
}

[data-theme="dark"] .el-tabs__item:hover {
  color: var(--primary) !important;
}

[data-theme="dark"] .el-tabs__item.is-active {
  color: var(--primary) !important;
  border-bottom-color: var(--primary) !important;
  background-color: var(--bg-primary) !important;
}

[data-theme="dark"] .el-tabs__content {
  background-color: var(--bg-primary) !important;
  color: var(--text-primary) !important;
}

[data-theme="dark"] .el-tab-pane {
  background-color: var(--bg-primary) !important;
  color: var(--text-primary) !important;
}

/* ===== 全局警告框系统 ===== */

[data-theme="dark"] .el-alert {
  background-color: var(--bg-primary) !important;
  border-color: var(--border-primary) !important;
  color: var(--text-primary) !important;
}

[data-theme="dark"] .el-alert * {
  background-color: var(--bg-primary) !important;
  color: var(--text-primary) !important;
}

[data-theme="dark"] .el-alert__content {
  background-color: var(--bg-primary) !important;
  color: var(--text-primary) !important;
}

[data-theme="dark"] .el-alert__title {
  background-color: var(--bg-primary) !important;
  color: var(--text-primary) !important;
}

[data-theme="dark"] .el-alert__description {
  background-color: var(--bg-primary) !important;
  color: var(--text-primary) !important;
}

[data-theme="dark"] .el-alert__icon {
  background-color: var(--bg-primary) !important;
  color: var(--text-primary) !important;
}

[data-theme="dark"] .el-alert ul,
[data-theme="dark"] .el-alert li {
  background-color: var(--bg-primary) !important;
  color: var(--text-primary) !important;
}

/* 不同类型的警告框 - 使用暗黑主题适配的颜色 */
[data-theme="dark"] .el-alert--success {
  background-color: var(--fill-primary) !important;
  border-color: var(--success) !important;
  color: var(--text-primary) !important;
}

[data-theme="dark"] .el-alert--success * {
  background-color: var(--fill-primary) !important;
  color: var(--text-primary) !important;
}

[data-theme="dark"] .el-alert--warning {
  background-color: var(--fill-primary) !important;
  border-color: var(--warning) !important;
  color: var(--text-primary) !important;
}

[data-theme="dark"] .el-alert--warning * {
  background-color: var(--fill-primary) !important;
  color: var(--text-primary) !important;
}

[data-theme="dark"] .el-alert--error {
  background-color: var(--fill-primary) !important;
  border-color: var(--danger) !important;
  color: var(--text-primary) !important;
}

[data-theme="dark"] .el-alert--error * {
  background-color: var(--fill-primary) !important;
  color: var(--text-primary) !important;
}

[data-theme="dark"] .el-alert--info {
  background-color: var(--fill-primary) !important;
  border-color: var(--info) !important;
  color: var(--text-primary) !important;
}

[data-theme="dark"] .el-alert--info * {
  background-color: var(--fill-primary) !important;
  color: var(--text-primary) !important;
}

/* ===== 全局标签组件 ===== */

[data-theme="dark"] .el-tag {
  background-color: var(--fill-primary) !important;
  border-color: var(--border-primary) !important;
  color: var(--text-secondary) !important;
}

[data-theme="dark"] .el-tag.el-tag--success {
  background-color: var(--success) !important;
  border-color: var(--success) !important;
  color: var(--text-inverse) !important;
}

[data-theme="dark"] .el-tag.el-tag--warning {
  background-color: var(--warning) !important;
  border-color: var(--warning) !important;
  color: var(--text-inverse) !important;
}

[data-theme="dark"] .el-tag.el-tag--danger {
  background-color: var(--danger) !important;
  border-color: var(--danger) !important;
  color: var(--text-inverse) !important;
}

[data-theme="dark"] .el-tag.el-tag--info {
  background-color: var(--info) !important;
  border-color: var(--info) !important;
  color: var(--text-inverse) !important;
}

/* ===== 全局弹出层系统 ===== */

[data-theme="dark"] .el-popper {
  background-color: var(--bg-overlay) !important;
  border-color: var(--border-primary) !important;
  color: var(--text-primary) !important;
  box-shadow: var(--shadow-base) !important;
}

[data-theme="dark"] .el-tooltip__popper {
  background-color: var(--bg-overlay) !important;
  color: var(--text-primary) !important;
  border-color: var(--border-primary) !important;
}

[data-theme="dark"] .el-popover {
  background-color: var(--bg-overlay) !important;
  border-color: var(--border-primary) !important;
  color: var(--text-primary) !important;
}

/* ===== 遮罩层 ===== */

[data-theme="dark"] .el-overlay {
  background-color: var(--bg-mask) !important;
}

[data-theme="dark"] .el-overlay-dialog {
  background-color: var(--bg-mask) !important;
}

[data-theme="dark"] .el-overlay-message-box {
  background-color: var(--bg-mask) !important;
}

/* ===== 修复内联样式覆盖 ===== */

/* 修复所有可能的内联白色背景 */
[data-theme="dark"] *[style*="background-color: #ffffff"],
[data-theme="dark"] *[style*="background-color: #fff"],
[data-theme="dark"] *[style*="background-color: white"],
[data-theme="dark"] *[style*="background-color:white"],
[data-theme="dark"] *[style*="background-color:#fff"],
[data-theme="dark"] *[style*="background-color:#ffffff"],
[data-theme="dark"] *[style*="background: #ffffff"],
[data-theme="dark"] *[style*="background: #fff"],
[data-theme="dark"] *[style*="background: white"],
[data-theme="dark"] *[style*="background:white"],
[data-theme="dark"] *[style*="background:#fff"],
[data-theme="dark"] *[style*="background:#ffffff"],
[data-theme="dark"] *[style*="background-color: rgb(255, 255, 255)"],
[data-theme="dark"] *[style*="background-color:rgb(255,255,255)"],
[data-theme="dark"] *[style*="background: rgb(255, 255, 255)"],
[data-theme="dark"] *[style*="background:rgb(255,255,255)"] {
  background-color: var(--bg-primary) !important;
}

/* 修复所有可能的内联黑色文字 */
[data-theme="dark"] *[style*="color: #000000"],
[data-theme="dark"] *[style*="color: #000"],
[data-theme="dark"] *[style*="color: black"],
[data-theme="dark"] *[style*="color:black"],
[data-theme="dark"] *[style*="color:#000"],
[data-theme="dark"] *[style*="color:#000000"],
[data-theme="dark"] *[style*="color: rgb(0, 0, 0)"],
[data-theme="dark"] *[style*="color:rgb(0,0,0)"] {
  color: var(--text-primary) !important;
}

/* ===== 特殊处理：确保按钮保持原有颜色 ===== */

/* 恢复按钮的原有颜色，但不给按钮内的文字添加背景 */
[data-theme="dark"] .el-button--primary {
  background-color: var(--primary) !important;
  border-color: var(--primary) !important;
  color: var(--text-inverse) !important;
}

[data-theme="dark"] .el-button--primary * {
  background-color: transparent !important;
  color: inherit !important;
}

[data-theme="dark"] .el-button--success {
  background-color: var(--success) !important;
  border-color: var(--success) !important;
  color: var(--text-inverse) !important;
}

[data-theme="dark"] .el-button--success * {
  background-color: transparent !important;
  color: inherit !important;
}

[data-theme="dark"] .el-button--warning {
  background-color: var(--warning) !important;
  border-color: var(--warning) !important;
  color: var(--text-inverse) !important;
}

[data-theme="dark"] .el-button--warning * {
  background-color: transparent !important;
  color: inherit !important;
}

[data-theme="dark"] .el-button--danger {
  background-color: var(--danger) !important;
  border-color: var(--danger) !important;
  color: var(--text-inverse) !important;
}

[data-theme="dark"] .el-button--danger * {
  background-color: transparent !important;
  color: inherit !important;
}

[data-theme="dark"] .el-button--info {
  background-color: var(--info) !important;
  border-color: var(--info) !important;
  color: var(--text-inverse) !important;
}

[data-theme="dark"] .el-button--info * {
  background-color: transparent !important;
  color: inherit !important;
}

/* 默认按钮 */
[data-theme="dark"] .el-button:not([class*="--"]) {
  background-color: var(--bg-primary) !important;
  border-color: var(--border-primary) !important;
  color: var(--text-secondary) !important;
}

[data-theme="dark"] .el-button:not([class*="--"]) * {
  background-color: transparent !important;
  color: inherit !important;
}

[data-theme="dark"] .el-button:not([class*="--"]):hover {
  background-color: var(--fill-primary) !important;
  border-color: var(--primary) !important;
  color: var(--primary) !important;
}

/* 确保所有按钮内的文字和图标都没有背景色 */
[data-theme="dark"] .el-button span,
[data-theme="dark"] .el-button i,
[data-theme="dark"] .el-button .el-icon {
  background-color: transparent !important;
}

/* ===== 确保所有Element Plus组件都应用主题 ===== */

/* 表格系统 */
[data-theme="dark"] .el-table {
  background-color: var(--bg-primary) !important;
  color: var(--text-primary) !important;
}

[data-theme="dark"] .el-table th.el-table__cell {
  background-color: var(--fill-primary) !important;
  color: var(--text-primary) !important;
  border-bottom-color: var(--border-primary) !important;
}

[data-theme="dark"] .el-table td.el-table__cell {
  background-color: var(--bg-primary) !important;
  color: var(--text-secondary) !important;
  border-bottom-color: var(--border-tertiary) !important;
}

[data-theme="dark"] .el-table__body tr:hover>td.el-table__cell {
  background-color: var(--fill-primary) !important;
}

/* 卡片系统 */
[data-theme="dark"] .el-card {
  background-color: var(--bg-primary) !important;
  border-color: var(--border-primary) !important;
  color: var(--text-primary) !important;
}

[data-theme="dark"] .el-card__header {
  background-color: var(--bg-primary) !important;
  border-bottom-color: var(--border-tertiary) !important;
  color: var(--text-primary) !important;
}

[data-theme="dark"] .el-card__body {
  background-color: var(--bg-primary) !important;
  color: var(--text-primary) !important;
}

/* 菜单系统 */
[data-theme="dark"] .el-menu {
  background-color: var(--bg-primary) !important;
  border-right-color: var(--border-primary) !important;
}

[data-theme="dark"] .el-menu-item {
  color: var(--text-secondary) !important;
}

[data-theme="dark"] .el-menu-item:hover {
  background-color: var(--fill-primary) !important;
  color: var(--primary) !important;
}

[data-theme="dark"] .el-menu-item.is-active {
  background-color: var(--primary) !important;
  color: var(--text-inverse) !important;
}

/* 分页系统 */
[data-theme="dark"] .el-pagination {
  color: var(--text-secondary) !important;
}

[data-theme="dark"] .el-pagination button {
  background-color: var(--bg-primary) !important;
  color: var(--text-secondary) !important;
  border-color: var(--border-primary) !important;
}

[data-theme="dark"] .el-pagination button:hover {
  color: var(--primary) !important;
  background-color: var(--fill-primary) !important;
}

[data-theme="dark"] .el-pagination button.is-active {
  color: var(--text-inverse) !important;
  background-color: var(--primary) !important;
  border-color: var(--primary) !important;
}

/* 下拉菜单 */
[data-theme="dark"] .el-dropdown-menu {
  background-color: var(--bg-overlay) !important;
  border-color: var(--border-primary) !important;
  box-shadow: var(--shadow-base) !important;
}

[data-theme="dark"] .el-dropdown-menu__item {
  color: var(--text-secondary) !important;
}

[data-theme="dark"] .el-dropdown-menu__item:hover {
  background-color: var(--fill-primary) !important;
  color: var(--primary) !important;
}

/* 消息提示 */
[data-theme="dark"] .el-message {
  background-color: var(--bg-overlay) !important;
  border-color: var(--border-primary) !important;
  color: var(--text-primary) !important;
  box-shadow: var(--shadow-base) !important;
}

[data-theme="dark"] .el-notification {
  background-color: var(--bg-overlay) !important;
  border-color: var(--border-primary) !important;
  color: var(--text-primary) !important;
  box-shadow: var(--shadow-base) !important;
}

/* 抽屉 */
[data-theme="dark"] .el-drawer {
  background-color: var(--bg-primary) !important;
  color: var(--text-primary) !important;
}

[data-theme="dark"] .el-drawer__header {
  color: var(--text-primary) !important;
  border-bottom-color: var(--border-tertiary) !important;
}

/* 加载遮罩 */
[data-theme="dark"] .el-loading-mask {
  background-color: var(--bg-mask) !important;
}

[data-theme="dark"] .el-loading-spinner {
  color: var(--primary) !important;
}

[data-theme="dark"] .el-loading-text {
  color: var(--text-primary) !important;
}