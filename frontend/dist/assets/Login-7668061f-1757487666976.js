import{_ as h,m as f,r as t,o as w,c as b,a,b as o,w as s,d as y,e as v}from"./index-9c6477ff-1757487666975.js";import{T as L}from"./ThemeToggle-d445fee0-1757487667116.js";const V={name:"Login",components:{ThemeToggle:L},data(){return{loginData:{username:"",password:""},rules:{username:[{required:!0,message:"请输入用户名",trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"}]}}},computed:{loading(){return this.$store.getters["auth/loginLoading"]}},methods:{...f("auth",["login"]),async handleLogin(){try{if(!await this.$refs.loginForm.validate())return;const e=await this.login(this.loginData);if(e.success){this.$message.success("登录成功");const u=this.$route.query.redirect||"/dashboard";this.$router.push(u)}else this.$message.error(e.message)}catch(l){console.error("Login error:",l),this.$message.error("登录失败，请重试")}}},created(){this.$store.getters["auth/isAuthenticated"]&&this.$router.push("/dashboard")}},x={class:"login-container"},T={class:"theme-toggle-wrapper"};function D(l,e,u,k,r,n){const g=t("ThemeToggle"),c=t("el-input"),i=t("el-form-item"),m=t("el-button"),p=t("el-form"),_=t("el-card");return w(),b("div",x,[a("div",T,[o(g)]),o(_,{class:"login-card"},{header:s(()=>[...e[2]||(e[2]=[a("div",{class:"card-header"},[a("h2",null,"网络资源管理系统"),a("p",null,"请登录您的账户")],-1)])]),default:s(()=>[o(p,{ref:"loginForm",model:r.loginData,rules:r.rules,"label-width":"0",class:"login-form"},{default:s(()=>[o(i,{prop:"username"},{default:s(()=>[o(c,{modelValue:r.loginData.username,"onUpdate:modelValue":e[0]||(e[0]=d=>r.loginData.username=d),placeholder:"用户名","prefix-icon":"User",size:"large"},null,8,["modelValue"])]),_:1}),o(i,{prop:"password"},{default:s(()=>[o(c,{modelValue:r.loginData.password,"onUpdate:modelValue":e[1]||(e[1]=d=>r.loginData.password=d),type:"password",placeholder:"密码","prefix-icon":"Lock",size:"large","show-password":"",onKeyup:y(n.handleLogin,["enter"])},null,8,["modelValue","onKeyup"])]),_:1}),o(i,null,{default:s(()=>[o(m,{type:"primary",size:"large",loading:n.loading,onClick:n.handleLogin,class:"login-button"},{default:s(()=>[...e[3]||(e[3]=[v(" 登录 ",-1)])]),_:1},8,["loading","onClick"])]),_:1})]),_:1},8,["model","rules"])]),_:1})])}const q=h(V,[["render",D],["__scopeId","data-v-72089b16"]]);export{q as default};
