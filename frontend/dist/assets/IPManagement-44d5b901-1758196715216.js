import{s as C,_ as pe,B as fe,j as ge,l as v,n as le,q as se,t as ve,r as c,o as d,c as A,b as i,a as o,w as s,e as _e,F as J,C as W,z as P,f as m,x as U,d as R,D as tl,G as ol,H as sl,k as rl,v as nl,E as S,y as il,I as dl}from"./index-37bb85c5-1758196715214.js";import{s as ye}from"./subnet-8903080f-1758196715489.js";import{g as ul}from"./deviceTypes-f2a7431e-1758196715489.js";import{getDepartmentOptions as cl}from"./departments-39383521-1758196715485.js";import{A as ml}from"./AppLayout-1ceae357-1758196715485.js";const T={getIPs(n={}){return C({url:"/ips",method:"get",params:n})},searchIPs(n={}){return C({url:"/ips/search",method:"get",params:n})},advancedSearchIPs(n){return C({url:"/ips/advanced-search",method:"post",data:n})},allocateIP(n){return C({url:"/ips/allocate",method:"post",data:n})},reserveIP(n){return C({url:"/ips/reserve",method:"post",data:n})},releaseIP(n){return C({url:"/ips/release",method:"post",data:n})},getStatistics(n=null){const l={};return n&&(l.subnet_id=n),C({url:"/ips/statistics",method:"get",params:l})},getConflicts(n=null){const l={};return n&&(l.subnet_id=n),C({url:"/ips/conflicts",method:"get",params:l})},getRangeStatus(n){return C({url:"/ips/range-status",method:"post",data:n})},bulkOperation(n){return C({url:"/ips/bulk-operation",method:"post",data:n})},syncSubnetIPs(n,l){return C({url:"/ips/sync",method:"post",data:{subnet_id:n,network:l}})},getAvailableIPs(n,l=10){return C({url:"/ips/available",method:"get",params:{subnet_id:n,limit:l}})},validateIP(n){return C({url:"/ips/validate",method:"post",data:{ip_address:n}})},getIPDetail(n){return C({url:`/ips/${n}`,method:"get"})},updateIP(n,l){return C({url:`/ips/${n}`,method:"put",data:l})},getSearchHistory(n=20){return C({url:"/ips/search-history",method:"get",params:{limit:n}})},getSearchFavorites(){return C({url:"/ips/search-favorites",method:"get"})},saveSearchHistory(n){return C({url:"/ips/search-history",method:"post",data:n})},toggleSearchFavorite(n){return C({url:`/ips/search-history/${n}/favorite`,method:"put"})},updateSearchName(n,l){return C({url:`/ips/search-history/${n}/name`,method:"put",params:{search_name:l}})},deleteSearchHistory(n){return C({url:`/ips/search-history/${n}`,method:"delete"})},getDepartments(){return C({url:"/ips/departments",method:"get"})},deleteIP(n){return C({url:"/ips/delete",method:"delete",data:n})}};const pl={name:"SimpleIPFilter",components:{Search:fe,Refresh:ge},emits:["search","reset"],setup(n,{emit:l}){const Q=v(!1),e=v(""),X=v([]),E=v([]),p=le({subnet_id:null,status:null,assigned_to:null}),V=se(()=>p.subnet_id||p.status||p.assigned_to||e.value),b=async()=>{try{const u=await ye.getSubnets();X.value=u.subnets||u.data||[]}catch(u){console.error("加载网段列表失败：",u)}},z=async()=>{try{const{getDepartmentOptions:u}=await tl(()=>import("./departments-39383521-1758196715485.js"),["assets/departments-39383521-1758196715485.js","assets/index-37bb85c5-1758196715214.js","assets/index-07047664-1758196715564.css"]),_=await u();if(_&&_.data&&_.data.departments){const w=_.data.departments.map(x=>x.name).sort();E.value=w;return}else if(_&&_.departments){const w=_.departments.map(x=>x.name).sort();E.value=w;return}const K=await T.searchIPs({status:"allocated",limit:1e3}),Y=(K.data||K||[]).map(w=>w.assigned_to).filter(w=>w&&w.trim()).filter((w,x,O)=>O.indexOf(w)===x).sort(),Z=[...["技术部","运维部","产品部","市场部","人事部","财务部","客服部"],...Y].filter((w,x,O)=>O.indexOf(w)===x).sort();E.value=Z}catch(u){console.error("加载部门列表失败：",u),E.value=["技术部","运维部","产品部","市场部","人事部","财务部","客服部"]}},q=()=>{I()},I=()=>{Q.value=!0;const u={query:e.value||void 0,subnet_id:p.subnet_id||void 0,status:p.status||void 0,assigned_to:p.assigned_to||void 0};Object.keys(u).forEach(_=>{(u[_]===void 0||u[_]==="")&&delete u[_]}),l("search",u),setTimeout(()=>{Q.value=!1},500)},L=()=>{e.value&&e.value.length>=2?I():e.value||I()},H=()=>{p.subnet_id=null,p.status=null,p.assigned_to=null,e.value="",l("reset")},f=u=>{p[u]=null,I()},F=()=>{e.value="",I()},N=u=>{const _=X.value.find(K=>K.id===u);return _?_.network:`网段${u}`},h=u=>({available:"可用",allocated:"使用中",reserved:"保留",conflict:"冲突"})[u]||u;return ve(()=>{b(),z()}),{searching:Q,searchQuery:e,subnets:X,departments:E,filters:p,hasActiveFilters:V,handleFilterChange:q,handleSearch:I,handleQuickSearch:L,handleReset:H,clearFilter:f,clearSearch:F,getSubnetName:N,getStatusText:h}}},fl={class:"simple-ip-filter"},gl={class:"filter-container"},vl={class:"theme-search-section"},_l={class:"filter-row"},yl={class:"filter-item"},bl={class:"filter-item"},hl={class:"filter-item"},kl={class:"filter-item"},Sl={class:"filter-actions"},Fl={key:0,class:"active-filters"};function Vl(n,l,Q,e,X,E){const p=c("Search"),V=c("el-icon"),b=c("el-input"),z=c("el-option"),q=c("el-select"),I=c("el-button"),L=c("Refresh"),H=c("el-tag");return d(),A("div",fl,[i("div",gl,[i("div",vl,[i("div",_l,[i("div",yl,[l[7]||(l[7]=i("label",{class:"filter-label"},"搜索关键词",-1)),o(b,{modelValue:e.searchQuery,"onUpdate:modelValue":l[0]||(l[0]=f=>e.searchQuery=f),placeholder:"搜索IP地址、使用人、MAC地址...",onInput:e.handleQuickSearch,onKeyup:_e(e.handleSearch,["enter"]),clearable:"",size:"default"},{prefix:s(()=>[o(V,null,{default:s(()=>[o(p)]),_:1})]),_:1},8,["modelValue","onInput","onKeyup"])]),i("div",bl,[l[8]||(l[8]=i("label",{class:"filter-label"},"网段筛选",-1)),o(q,{modelValue:e.filters.subnet_id,"onUpdate:modelValue":l[1]||(l[1]=f=>e.filters.subnet_id=f),placeholder:"选择网段",clearable:"",onChange:e.handleFilterChange,size:"default"},{default:s(()=>[(d(!0),A(J,null,W(e.subnets,f=>(d(),P(z,{key:f.id,label:f.network,value:f.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue","onChange"])]),i("div",hl,[l[9]||(l[9]=i("label",{class:"filter-label"},"状态筛选",-1)),o(q,{modelValue:e.filters.status,"onUpdate:modelValue":l[2]||(l[2]=f=>e.filters.status=f),placeholder:"选择状态",clearable:"",onChange:e.handleFilterChange,size:"default"},{default:s(()=>[o(z,{label:"可用",value:"available"}),o(z,{label:"使用中",value:"allocated"}),o(z,{label:"保留",value:"reserved"}),o(z,{label:"冲突",value:"conflict"})]),_:1},8,["modelValue","onChange"])]),i("div",kl,[l[10]||(l[10]=i("label",{class:"filter-label"},"所属部门",-1)),o(q,{modelValue:e.filters.assigned_to,"onUpdate:modelValue":l[3]||(l[3]=f=>e.filters.assigned_to=f),placeholder:"选择部门",clearable:"",filterable:"","allow-create":"",onChange:e.handleFilterChange,size:"default"},{default:s(()=>[(d(!0),A(J,null,W(e.departments,f=>(d(),P(z,{key:f,label:f,value:f},null,8,["label","value"]))),128))]),_:1},8,["modelValue","onChange"])]),i("div",Sl,[o(I,{type:"primary",onClick:e.handleSearch,loading:e.searching,size:"default"},{default:s(()=>[o(V,null,{default:s(()=>[o(p)]),_:1}),l[11]||(l[11]=m(" 搜索 ",-1))]),_:1},8,["onClick","loading"]),o(I,{type:"info",onClick:e.handleReset,size:"default"},{default:s(()=>[o(V,null,{default:s(()=>[o(L)]),_:1}),l[12]||(l[12]=m(" 重置 ",-1))]),_:1},8,["onClick"])])])])]),e.hasActiveFilters?(d(),A("div",Fl,[l[13]||(l[13]=i("span",{class:"filter-label"},"当前筛选：",-1)),e.filters.subnet_id?(d(),P(H,{key:0,closable:"",onClose:l[4]||(l[4]=f=>e.clearFilter("subnet_id")),type:"primary",size:"small"},{default:s(()=>[m(" 网段: "+U(e.getSubnetName(e.filters.subnet_id)),1)]),_:1})):R("",!0),e.filters.status?(d(),P(H,{key:1,closable:"",onClose:l[5]||(l[5]=f=>e.clearFilter("status")),type:"success",size:"small"},{default:s(()=>[m(" 状态: "+U(e.getStatusText(e.filters.status)),1)]),_:1})):R("",!0),e.filters.assigned_to?(d(),P(H,{key:2,closable:"",onClose:l[6]||(l[6]=f=>e.clearFilter("assigned_to")),type:"warning",size:"small"},{default:s(()=>[m(" 部门: "+U(e.filters.assigned_to),1)]),_:1})):R("",!0),e.searchQuery?(d(),P(H,{key:3,closable:"",onClose:e.clearSearch,type:"info",size:"small"},{default:s(()=>[m(" 关键词: "+U(e.searchQuery),1)]),_:1},8,["onClose"])):R("",!0)])):R("",!0)])}const wl=pe(pl,[["render",Vl],["__scopeId","data-v-1d593bd4"]]);const Cl={name:"IPManagement",components:{AppLayout:ml,Plus:ol,Operation:sl,Refresh:ge,Search:fe,SimpleIPFilter:wl},setup(){const n=rl(),l=se(()=>n.getters["auth/currentUser"]),Q=se(()=>n.getters["auth/userRole"]),e=se(()=>{var a;return((a=Q.value)==null?void 0:a.toLowerCase())==="admin"}),X=se(()=>{var a;return((a=Q.value)==null?void 0:a.toLowerCase())==="readonly"}),E=v(!1),p=v(!1),V=v([]),b=v([]),z=v([]),q=v([]),I=v([]),L=v(""),H=v(""),f=v(""),F=v(""),N=v(!1),h=v(1),u=v(20),_=v(0),K=v({total:0,available:0,allocated:0,reserved:0,utilization_rate:0}),j=v(!1),Y=v(!1),g=v(!1),Z=v(!1),w=v(!1),x=v(!1),O=le({subnet_id:"",preferred_ip:"",mac_address:"",user_name:"",device_type:"",location:"",assigned_to:"",description:"",allocated_at:null}),ae=le({ip_address:"",reason:""}),te=le({ip_address:"",reason:""}),$=le({operation:"reserve",reason:""}),t=le({ip_address:"",reason:""}),M=le({ip_address:"",mac_address:"",user_name:"",device_type:"",assigned_to:"",description:"",allocated_at:null}),be={subnet_id:[{required:!0,message:"请选择网段",trigger:"change"}],user_name:[{required:!0,message:"请填写使用人",trigger:"blur"}],device_type:[{required:!0,message:"请选择设备类型",trigger:"change"}],assigned_to:[{required:!0,message:"请选择使用部门",trigger:"change"}],allocated_at:[{required:!0,message:"请选择分配时间",trigger:"change"}],mac_address:[{pattern:/^([0-9A-Fa-f]{2}[:-]){5}([0-9A-Fa-f]{2})$/,message:"MAC地址格式不正确",trigger:"blur"}]},he={reason:[{required:!0,message:"请填写保留原因",trigger:"blur"}]},ke={reason:[{required:!0,message:"请填写释放原因",trigger:"blur"}]},Se={operation:[{required:!0,message:"请选择操作类型",trigger:"change"}],reason:[{required:!0,message:"请填写操作原因",trigger:"blur"}]},Fe={reason:[{required:!0,message:"请填写删除原因",trigger:"blur"}]},Ve={user_name:[{required:!0,message:"请填写使用人",trigger:"blur"}],device_type:[{required:!0,message:"请选择设备类型",trigger:"change"}],assigned_to:[{required:!0,message:"请选择使用部门",trigger:"change"}],mac_address:[{pattern:/^([0-9A-Fa-f]{2}[:-]){5}([0-9A-Fa-f]{2})$/,message:"MAC地址格式不正确",trigger:"blur"}]},G=async()=>{E.value=!0;try{const a={skip:(h.value-1)*u.value,limit:u.value};L.value&&(a.query=L.value),H.value&&(a.status=H.value),f.value&&(a.subnet_id=f.value);const r=await T.searchIPs(a);V.value=r.data||r||[],_.value=V.value.length>=u.value?h.value*u.value+1:(h.value-1)*u.value+V.value.length}catch(a){S.error("加载IP地址列表失败："+a.message)}finally{E.value=!1}},we=async()=>{try{const a=await ye.getSubnets();b.value=a.subnets||a.data||[]}catch(a){S.error("加载网段列表失败："+a.message)}},Ce=async()=>{try{const a=await cl();if(a&&a.data&&a.data.departments){const r=a.data.departments.map(k=>k.name).sort();z.value=r}else if(a&&a.departments){const r=a.departments.map(k=>k.name).sort();z.value=r}else console.warn("部门API返回格式不正确:",a),z.value=[]}catch(a){console.error("从API加载部门列表失败：",a),z.value=[]}},Pe=async()=>{try{const a=await ul();a&&a.data&&Array.isArray(a.data)?q.value=a.data.filter(r=>r.status==="active"):a&&Array.isArray(a)?q.value=a.filter(r=>r.status==="active"):q.value=[{code:"server",name:"服务器"},{code:"desktop",name:"台式机"},{code:"laptop",name:"笔记本电脑"},{code:"switch",name:"网络交换机"},{code:"router",name:"路由器"},{code:"printer",name:"打印机"},{code:"firewall",name:"防火墙"},{code:"other",name:"其他"}]}catch(a){console.error("加载设备类型列表失败：",a),q.value=[{code:"server",name:"服务器"},{code:"desktop",name:"台式机"},{code:"laptop",name:"笔记本电脑"},{code:"switch",name:"网络交换机"},{code:"router",name:"路由器"},{code:"printer",name:"打印机"},{code:"firewall",name:"防火墙"},{code:"other",name:"其他"}]}},oe=async()=>{try{const a=await T.getStatistics(f.value||void 0),r=a.data||a||{};K.value={total:r.total_ips||0,available:r.available_ips||0,allocated:r.allocated_ips||0,reserved:r.reserved_ips||0,utilization_rate:r.utilization_rate||0}}catch(a){console.error("加载统计信息失败：",a)}},Ie=()=>{var a;if(console.log("=== 刷新按钮被点击 ==="),S.info("正在刷新数据..."),console.log("当前用户角色:",Q.value),console.log("当前用户名:",(a=l.value)==null?void 0:a.username),console.log("当前路由:",window.location.pathname),console.log("认证状态:",n.getters["auth/isAuthenticated"]),!l.value){console.error("用户信息丢失，可能需要重新登录"),S.error("用户信息丢失，请重新登录"),n.dispatch("auth/logout");return}h.value=1,B.value=null,G(),oe(),console.log("=== 刷新数据完成 ==="),S.success("数据刷新完成")},ee=()=>{console.log("=== 刷新当前页面数据 ==="),console.log("保持当前页面:",h.value),B.value?re(B.value,!1):G(),oe(),console.log("=== 当前页面数据刷新完成 ===")},De=()=>{h.value=1,G()},Re=()=>{h.value=1,G(),oe()},re=async(a,r=!0)=>{E.value=!0;try{B.value=a,L.value=a.query||"",H.value=a.status||"",f.value=a.subnet_id||"",r&&(h.value=1);const k={...a,skip:(h.value-1)*u.value,limit:u.value},D=await T.searchIPs(k);if(D.data&&Array.isArray(D.data)?(V.value=D.data,_.value=D.total||D.data.length):Array.isArray(D.data)?(V.value=D.data,_.value=D.data.length):Array.isArray(D)?(V.value=D,_.value=D.length):(V.value=[],_.value=0),Object.keys(a).length>0){const y=a.query,ie=a.subnet_id||a.status||a.assigned_to}oe()}catch(k){S.error("搜索失败："+k.message)}finally{E.value=!1}},Ae=()=>{B.value=null,h.value=1,G(),oe()},xe=async()=>{if(!F.value||!F.value.trim()){S.warning("请输入搜索关键词");return}E.value=!0;try{h.value=1,N.value=!0;const a={skip:0,limit:u.value,query:F.value.trim()};B.value={query:F.value.trim()};const r=await T.searchIPs(a);r.data&&Array.isArray(r.data)?(V.value=r.data,_.value=r.total||r.data.length):Array.isArray(r)?(V.value=r,_.value=r.length):(V.value=[],_.value=0),V.value.length===0?S.info("未找到匹配的IP地址"):S.success(`找到 ${_.value} 条匹配记录`)}catch(a){S.error("搜索失败："+a.message),N.value=!1,B.value=null}finally{E.value=!1}},B=v(null),de=v(null),ne=v(null),Me=a=>{u.value=a,h.value=1,B.value?re(B.value,!1):G()},Ue=a=>{h.value=a,B.value?re(B.value,!1):G()},ze=a=>{I.value=a},qe=a=>{const r=I.value.findIndex(k=>k.id===a.id);r>-1&&I.value.splice(r,1)},Ee=a=>{a&&(O.subnet_id=a.subnet_id,O.preferred_ip=a.ip_address);const r=new Date,k=r.getFullYear(),D=String(r.getMonth()+1).padStart(2,"0"),y=String(r.getDate()).padStart(2,"0"),ie=String(r.getHours()).padStart(2,"0"),ce=String(r.getMinutes()).padStart(2,"0"),me=String(r.getSeconds()).padStart(2,"0");O.allocated_at=`${k}-${D}-${y} ${ie}:${ce}:${me}`,j.value=!0},Oe=a=>{ae.ip_address=a.ip_address,Y.value=!0},Le=a=>{te.ip_address=a.ip_address,g.value=!0},He=a=>{t.ip_address=a.ip_address,w.value=!0},Be=a=>{M.ip_address=a.ip_address,M.mac_address=a.mac_address||"",M.user_name=a.user_name||"",M.device_type=a.device_type||"",M.assigned_to=a.assigned_to||"",M.description=a.description||"",M.allocated_at=a.allocated_at||null,x.value=!0,setTimeout(()=>{ue()},100)},Ye=a=>{a&&setTimeout(()=>{ue()},50)},ue=()=>{const a=document.documentElement.getAttribute("data-theme")==="dark"||document.body.classList.contains("dark")||document.documentElement.classList.contains("dark");setTimeout(()=>{document.querySelectorAll(".ip-management-select-dropdown, .el-select-dropdown").forEach(k=>{a&&(k.style.setProperty("background-color","#1d1e1f","important"),k.style.setProperty("border-color","#414243","important"),k.style.setProperty("color","#e5eaf3","important"),k.querySelectorAll(".el-select-dropdown__item").forEach(y=>{y.style.setProperty("color","#e5eaf3","important"),y.style.setProperty("background-color","transparent","important"),y.removeEventListener("mouseenter",y._darkModeEnterHandler),y.removeEventListener("mouseleave",y._darkModeLeaveHandler),y._darkModeEnterHandler=()=>{a&&!y.classList.contains("selected")&&(y.style.setProperty("background-color","#262727","important"),y.style.setProperty("color","#e5eaf3","important"))},y._darkModeLeaveHandler=()=>{a&&!y.classList.contains("selected")&&(y.style.setProperty("background-color","transparent","important"),y.style.setProperty("color","#e5eaf3","important"))},y.addEventListener("mouseenter",y._darkModeEnterHandler),y.addEventListener("mouseleave",y._darkModeLeaveHandler),y.classList.contains("selected")&&(y.style.setProperty("background-color","#409eff","important"),y.style.setProperty("color","#ffffff","important"))}))})},10)},Te=async()=>{if(de.value){try{await de.value.validate()}catch{S.warning("请填写完整的必填信息");return}p.value=!0;try{const a={...O};if(a.allocated_at){const r=new Date(a.allocated_at);a.allocated_at=r.toISOString()}console.log("提交分配数据:",a),await T.allocateIP(a),S.success("IP地址分配成功"),j.value=!1,ee()}catch(a){console.error("分配失败:",a),S.error("分配失败："+a.message)}finally{p.value=!1}}},Qe=async()=>{p.value=!0;try{await T.reserveIP(ae),S.success("IP地址保留成功"),Y.value=!1,ee()}catch(a){S.error("保留失败："+a.message)}finally{p.value=!1}},je=async()=>{p.value=!0;try{await T.releaseIP(te),S.success("IP地址释放成功"),g.value=!1,ee()}catch(a){S.error("释放失败："+a.message)}finally{p.value=!1}},Ne=()=>{switch($.operation){case"reserve":return"warning";case"release":return"danger";case"delete":return"danger";default:return"primary"}},Ke=async()=>{if(I.value.length===0){S.warning("请选择要操作的IP地址");return}p.value=!0;try{const r={ip_addresses:I.value.map(y=>y.ip_address),operation:$.operation,reason:$.reason},k=await T.bulkOperation(r),D=k.data||k;S.success(`批量操作完成：成功${D.success_count}个，失败${D.failed_count}个`),Z.value=!1,I.value=[],ee()}catch(a){S.error("批量操作失败："+a.message)}finally{p.value=!1}},Ge=()=>{Object.assign(O,{subnet_id:"",preferred_ip:"",mac_address:"",user_name:"",device_type:"",location:"",assigned_to:"",description:"",allocated_at:null})},Je=()=>{Object.assign(ae,{ip_address:"",reason:""})},We=()=>{Object.assign(te,{ip_address:"",reason:""})},Xe=()=>{Object.assign($,{operation:"reserve",reason:""})},Ze=a=>({available:"success",allocated:"primary",reserved:"warning",conflict:"danger"})[a]||"info",$e=a=>({available:{backgroundColor:"#f0f9ff",borderColor:"#67c23a",color:"#67c23a"},allocated:{backgroundColor:"#ecf5ff",borderColor:"#409eff",color:"#409eff"},reserved:{backgroundColor:"#fdf6ec",borderColor:"#e6a23c",color:"#e6a23c"},conflict:{backgroundColor:"#fef0f0",borderColor:"#f56c6c",color:"#f56c6c"}})[a]||{backgroundColor:"#f4f4f5",borderColor:"#909399",color:"#909399"},el=a=>({available:"可用",allocated:"使用中",reserved:"保留",conflict:"冲突"})[a]||a,ll=a=>a?new Date(a).toLocaleString("zh-CN"):"-",al=a=>{if(!a)return"-";if(q.value&&q.value.length>0){const k=q.value.find(D=>D.code===a);if(k&&k.name)return k.name}const r={server:"服务器",desktop:"台式机",laptop:"笔记本电脑",switch:"网络交换机",router:"路由器",printer:"打印机",firewall:"防火墙",access_point:"无线接入点",scanner:"扫描仪",other:"其他",tablet:"平板电脑",phone:"手机",camera:"摄像头",storage:"存储设备",monitor:"显示器",projector:"投影仪"};return r[a]?r[a]:a};return ve(async()=>{await Promise.all([we(),Ce(),Pe()]),G(),oe()}),{currentUser:l,userRole:Q,isAdmin:e,isReadonly:X,loading:E,submitting:p,ipList:V,subnets:b,departments:z,deviceTypes:q,selectedIPs:I,searchQuery:L,statusFilter:H,subnetFilter:f,currentPage:h,pageSize:u,total:_,statistics:K,currentSearchParams:B,readonlySearchQuery:F,hasSearched:N,showAllocationDialog:j,showReservationDialog:Y,showReleaseDialog:g,showBulkDialog:Z,showDeleteDialog:w,showEditDialog:x,allocationForm:O,reservationForm:ae,releaseForm:te,bulkForm:$,deleteForm:t,editForm:M,allocationRules:be,reservationRules:he,releaseRules:ke,bulkRules:Se,deleteRules:Fe,editRules:Ve,allocationFormRef:de,editFormRef:ne,refreshData:Ie,refreshCurrentPageData:ee,handleSearch:De,handleFilter:Re,handleSimpleSearch:re,handleSearchReset:Ae,handleReadonlySearch:xe,handleSizeChange:Me,handleCurrentChange:Ue,handleSelectionChange:ze,removeSelectedIP:qe,allocateIP:Ee,reserveIP:Oe,releaseIP:Le,deleteIP:He,editIP:Be,fixDropdownStyles:ue,handleSelectVisibleChange:Ye,submitAllocation:Te,submitReservation:Qe,submitRelease:je,submitBulkOperation:Ke,submitDelete:async()=>{p.value=!0;try{await T.deleteIP(t),S.success("IP地址删除成功"),w.value=!1,ee()}catch(a){S.error("删除失败："+a.message)}finally{p.value=!1}},submitEdit:async()=>{if(console.log("submitEdit 方法被调用"),console.log("editFormRef.value:",ne.value),console.log("editForm 数据:",M),!ne.value){console.log("editFormRef.value 为空，返回");return}try{console.log("开始表单验证"),await ne.value.validate(),console.log("表单验证通过")}catch(a){console.log("表单验证失败:",a),S.warning("请填写完整的必填信息");return}p.value=!0;try{const a={...M};if(a.allocated_at){const r=new Date(a.allocated_at),k=r.getFullYear(),D=String(r.getMonth()+1).padStart(2,"0"),y=String(r.getDate()).padStart(2,"0"),ie=String(r.getHours()).padStart(2,"0"),ce=String(r.getMinutes()).padStart(2,"0"),me=String(r.getSeconds()).padStart(2,"0");a.allocated_at=`${k}-${D}-${y} ${ie}:${ce}:${me}`}await T.updateIP(M.ip_address,a),S.success("IP地址修改成功"),x.value=!1,ee()}catch(a){S.error("修改失败："+a.message)}finally{p.value=!1}},resetAllocationForm:Ge,resetReservationForm:Je,resetReleaseForm:We,resetBulkForm:Xe,resetDeleteForm:()=>{Object.assign(t,{ip_address:"",reason:""})},resetEditForm:()=>{Object.assign(M,{ip_address:"",mac_address:"",user_name:"",device_type:"",assigned_to:"",description:"",allocated_at:null})},getBulkOperationButtonType:Ne,getStatusTagType:Ze,getStatusStyle:$e,getStatusText:el,formatDate:ll,getDeviceTypeName:al}}},Pl={class:"ip-management"},Il={class:"header-section"},Dl={class:"header-actions"},Rl={key:1,class:"stats-section"},Al={class:"stats-item"},xl={class:"stats-value"},Ml={class:"stats-item"},Ul={class:"stats-value"},zl={class:"stats-item"},ql={class:"stats-value"},El={class:"stats-item"},Ol={class:"stats-value"},Ll={key:2,class:"readonly-search-section"},Hl={class:"readonly-search-container"},Bl={key:3,class:"readonly-search-hint"},Yl={class:"search-hint-content"},Tl={key:4,class:"table-section"},Ql={key:0,class:"search-status"},jl={key:1,class:"readonly-search-result"},Nl={key:0},Kl={key:1},Gl={class:"action-buttons"},Jl={class:"pagination-section"},Wl={class:"selected-ips"},Xl={key:0,class:"no-selection"};function Zl(n,l,Q,e,X,E){const p=c("Operation"),V=c("el-icon"),b=c("el-button"),z=c("Refresh"),q=c("SimpleIPFilter"),I=c("el-card"),L=c("el-col"),H=c("el-row"),f=c("Search"),F=c("el-input"),N=c("el-alert"),h=c("el-table-column"),u=c("el-tag"),_=c("el-table"),K=c("el-pagination"),j=c("el-option"),Y=c("el-select"),g=c("el-form-item"),Z=c("el-date-picker"),w=c("el-form"),x=c("el-dialog"),O=c("el-radio"),ae=c("el-radio-group"),te=c("AppLayout"),$=nl("loading");return d(),P(te,null,{default:s(()=>[i("div",Pl,[i("div",Il,[l[41]||(l[41]=i("h1",null,"IP地址管理",-1)),i("div",Dl,[e.isReadonly?R("",!0):(d(),P(b,{key:0,type:"info",onClick:l[0]||(l[0]=t=>e.showBulkDialog=!0)},{default:s(()=>[o(V,null,{default:s(()=>[o(p)]),_:1}),l[39]||(l[39]=m(" 批量操作 ",-1))]),_:1})),o(b,{type:"info",onClick:e.refreshData},{default:s(()=>[o(V,null,{default:s(()=>[o(z)]),_:1}),l[40]||(l[40]=m(" 刷新 ",-1))]),_:1},8,["onClick"])])]),e.isReadonly?R("",!0):(d(),P(q,{key:0,onSearch:e.handleSimpleSearch,onReset:e.handleSearchReset},null,8,["onSearch","onReset"])),e.isReadonly?R("",!0):(d(),A("div",Rl,[o(H,{gutter:20},{default:s(()=>[o(L,{span:6},{default:s(()=>[o(I,{class:"stats-card"},{default:s(()=>[i("div",Al,[i("div",xl,U(e.statistics.total),1),l[42]||(l[42]=i("div",{class:"stats-label"},"总IP数量",-1))])]),_:1})]),_:1}),o(L,{span:6},{default:s(()=>[o(I,{class:"stats-card"},{default:s(()=>[i("div",Ml,[i("div",Ul,U(e.statistics.available),1),l[43]||(l[43]=i("div",{class:"stats-label"},"可用IP",-1))])]),_:1})]),_:1}),o(L,{span:6},{default:s(()=>[o(I,{class:"stats-card"},{default:s(()=>[i("div",zl,[i("div",ql,U(e.statistics.allocated),1),l[44]||(l[44]=i("div",{class:"stats-label"},"使用中",-1))])]),_:1})]),_:1}),o(L,{span:6},{default:s(()=>[o(I,{class:"stats-card"},{default:s(()=>[i("div",El,[i("div",Ol,U(e.statistics.utilization_rate)+"%",1),l[45]||(l[45]=i("div",{class:"stats-label"},"使用率",-1))])]),_:1})]),_:1})]),_:1})])),e.isReadonly?(d(),A("div",Ll,[i("div",Hl,[o(F,{modelValue:e.readonlySearchQuery,"onUpdate:modelValue":l[1]||(l[1]=t=>e.readonlySearchQuery=t),placeholder:"搜索IP地址、使用人、MAC地址...",onInput:e.handleReadonlySearch,onKeyup:_e(e.handleReadonlySearch,["enter"]),clearable:"",size:"large",class:"readonly-search-input"},{prefix:s(()=>[o(V,null,{default:s(()=>[o(f)]),_:1})]),append:s(()=>[o(b,{type:"primary",onClick:e.handleReadonlySearch,loading:e.loading},{default:s(()=>[...l[46]||(l[46]=[m(" 搜索 ",-1)])]),_:1},8,["onClick","loading"])]),_:1},8,["modelValue","onInput","onKeyup"])])])):R("",!0),e.isReadonly&&!e.hasSearched?(d(),A("div",Bl,[i("div",Yl,[o(V,{class:"search-hint-icon"},{default:s(()=>[o(f)]),_:1}),l[47]||(l[47]=i("h3",null,"请输入搜索关键词查询IP地址",-1)),l[48]||(l[48]=i("p",null,"支持搜索IP地址、使用人、MAC地址等信息",-1))])])):R("",!0),!e.isReadonly||e.hasSearched?(d(),A("div",Tl,[e.currentSearchParams?(d(),A("div",Ql,[o(N,{title:`当前显示搜索结果：共 ${e.total} 条记录`,type:"info",closable:!1,"show-icon":""},{default:s(()=>[...l[49]||(l[49]=[i("span",null,'当前显示搜索结果，点击"重置"按钮可查看所有数据',-1)])]),_:1},8,["title"])])):R("",!0),e.isReadonly&&e.hasSearched?(d(),A("div",jl,[o(N,{title:`搜索结果：共找到 ${e.total} 条记录`,type:"success",closable:!1,"show-icon":""},{default:s(()=>[e.readonlySearchQuery?(d(),A("span",Nl,'关键词："'+U(e.readonlySearchQuery)+'"',1)):(d(),A("span",Kl,"显示所有IP地址"))]),_:1},8,["title"])])):R("",!0),il((d(),P(_,{data:e.ipList,stripe:"",onSelectionChange:e.handleSelectionChange},{default:s(()=>[e.isReadonly?R("",!0):(d(),P(h,{key:0,type:"selection",width:"70"})),o(h,{prop:"ip_address",label:"IP地址",width:"130",sortable:"",align:"center"}),o(h,{prop:"status",label:"状态",width:"120",align:"center"},{default:s(({row:t})=>[o(u,{type:e.getStatusTagType(t.status),size:"small",style:dl(e.getStatusStyle(t.status))},{default:s(()=>[m(U(e.getStatusText(t.status)),1)]),_:2},1032,["type","style"])]),_:1}),o(h,{prop:"user_name",label:"使用人",width:"120",align:"center"},{default:s(({row:t})=>[i("span",null,U(t.user_name||"-"),1)]),_:1}),o(h,{prop:"mac_address",label:"MAC地址",width:"160",align:"center"},{default:s(({row:t})=>[i("span",null,U(t.mac_address||"-"),1)]),_:1}),o(h,{prop:"device_type",label:"设备类型",width:"140",align:"center"},{default:s(({row:t})=>[i("span",null,U(e.getDeviceTypeName(t.device_type)),1)]),_:1}),o(h,{prop:"assigned_to",label:"所属部门",width:"140",align:"center"},{default:s(({row:t})=>[i("span",null,U(t.assigned_to||"-"),1)]),_:1}),o(h,{prop:"description",label:"描述",width:"200","show-overflow-tooltip":"",align:"center"},{default:s(({row:t})=>[i("span",null,U(t.description||"-"),1)]),_:1}),o(h,{prop:"allocated_at",label:"分配时间",width:"220",align:"center"},{default:s(({row:t})=>[i("span",null,U(t.allocated_at?e.formatDate(t.allocated_at):"-"),1)]),_:1}),e.isReadonly?R("",!0):(d(),P(h,{key:1,label:"操作",width:"280",fixed:"right",align:"center"},{default:s(({row:t})=>[i("div",Gl,[t.status==="available"?(d(),P(b,{key:0,type:"primary",size:"small",onClick:M=>e.allocateIP(t)},{default:s(()=>[...l[50]||(l[50]=[m(" 分配 ",-1)])]),_:2},1032,["onClick"])):R("",!0),o(b,{type:"info",size:"small",onClick:M=>e.editIP(t)},{default:s(()=>[...l[51]||(l[51]=[m(" 编辑 ",-1)])]),_:2},1032,["onClick"]),t.status==="available"?(d(),P(b,{key:1,type:"warning",size:"small",onClick:M=>e.reserveIP(t)},{default:s(()=>[...l[52]||(l[52]=[m(" 保留 ",-1)])]),_:2},1032,["onClick"])):R("",!0),t.status==="allocated"||t.status==="reserved"?(d(),P(b,{key:2,type:"danger",size:"small",onClick:M=>e.releaseIP(t)},{default:s(()=>[...l[53]||(l[53]=[m(" 释放 ",-1)])]),_:2},1032,["onClick"])):R("",!0),(t.status==="available"||t.status==="reserved")&&e.isAdmin?(d(),P(b,{key:3,type:"danger",size:"small",plain:"",onClick:M=>e.deleteIP(t)},{default:s(()=>[...l[54]||(l[54]=[m(" 删除 ",-1)])]),_:2},1032,["onClick"])):R("",!0)])]),_:1}))]),_:1},8,["data","onSelectionChange"])),[[$,e.loading]]),i("div",Jl,[o(K,{"current-page":e.currentPage,"onUpdate:currentPage":l[2]||(l[2]=t=>e.currentPage=t),"page-size":e.pageSize,"onUpdate:pageSize":l[3]||(l[3]=t=>e.pageSize=t),"page-sizes":[20,50,100,200],total:e.total,layout:"total, sizes, prev, pager, next, jumper",onSizeChange:e.handleSizeChange,onCurrentChange:e.handleCurrentChange},null,8,["current-page","page-size","total","onSizeChange","onCurrentChange"])])])):R("",!0),o(x,{modelValue:e.showAllocationDialog,"onUpdate:modelValue":l[13]||(l[13]=t=>e.showAllocationDialog=t),title:"分配地址",width:"600px",onClose:e.resetAllocationForm},{footer:s(()=>[o(b,{onClick:l[12]||(l[12]=t=>e.showAllocationDialog=!1)},{default:s(()=>[...l[56]||(l[56]=[m("取消",-1)])]),_:1}),o(b,{type:"primary",onClick:e.submitAllocation,loading:e.submitting},{default:s(()=>[...l[57]||(l[57]=[m(" 确认分配 ",-1)])]),_:1},8,["onClick","loading"])]),default:s(()=>[o(w,{ref:"allocationFormRef",model:e.allocationForm,rules:e.allocationRules,"label-width":"100px"},{default:s(()=>[o(g,{label:"网段",prop:"subnet_id",required:""},{default:s(()=>[o(Y,{modelValue:e.allocationForm.subnet_id,"onUpdate:modelValue":l[4]||(l[4]=t=>e.allocationForm.subnet_id=t),placeholder:"选择网段",style:{width:"100%"}},{default:s(()=>[(d(!0),A(J,null,W(e.subnets,t=>(d(),P(j,{key:t.id,label:t.network,value:t.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),o(g,{label:"首选IP",prop:"preferred_ip"},{default:s(()=>[o(F,{modelValue:e.allocationForm.preferred_ip,"onUpdate:modelValue":l[5]||(l[5]=t=>e.allocationForm.preferred_ip=t),placeholder:"留空自动分配"},null,8,["modelValue"])]),_:1}),o(g,{label:"MAC地址",prop:"mac_address"},{default:s(()=>[o(F,{modelValue:e.allocationForm.mac_address,"onUpdate:modelValue":l[6]||(l[6]=t=>e.allocationForm.mac_address=t),placeholder:"如：00:11:22:33:44:55"},null,8,["modelValue"])]),_:1}),o(g,{label:"使用人",prop:"user_name",required:""},{default:s(()=>[o(F,{modelValue:e.allocationForm.user_name,"onUpdate:modelValue":l[7]||(l[7]=t=>e.allocationForm.user_name=t),placeholder:"使用人"},null,8,["modelValue"])]),_:1}),o(g,{label:"设备类型",prop:"device_type",required:""},{default:s(()=>[o(Y,{modelValue:e.allocationForm.device_type,"onUpdate:modelValue":l[8]||(l[8]=t=>e.allocationForm.device_type=t),placeholder:"选择设备类型",style:{width:"100%"}},{default:s(()=>[(d(!0),A(J,null,W(e.deviceTypes,t=>(d(),P(j,{key:t.code,label:t.name,value:t.code},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),o(g,{label:"使用部门",prop:"assigned_to",required:""},{default:s(()=>[o(Y,{modelValue:e.allocationForm.assigned_to,"onUpdate:modelValue":l[9]||(l[9]=t=>e.allocationForm.assigned_to=t),placeholder:"选择部门",filterable:"","allow-create":"",style:{width:"100%"}},{default:s(()=>[(d(!0),A(J,null,W(e.departments,t=>(d(),P(j,{key:t,label:t,value:t},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),o(g,{label:"分配时间",prop:"allocated_at",required:""},{default:s(()=>[o(Z,{modelValue:e.allocationForm.allocated_at,"onUpdate:modelValue":l[10]||(l[10]=t=>e.allocationForm.allocated_at=t),type:"datetime",placeholder:"选择分配时间",format:"YYYY-MM-DD HH:mm:ss","value-format":"YYYY-MM-DD HH:mm:ss",style:{width:"100%"}},null,8,["modelValue"]),l[55]||(l[55]=i("div",{class:"form-tip"},"默认为当前时间，可手动修改",-1))]),_:1}),o(g,{label:"描述",prop:"description"},{default:s(()=>[o(F,{modelValue:e.allocationForm.description,"onUpdate:modelValue":l[11]||(l[11]=t=>e.allocationForm.description=t),type:"textarea",rows:3,placeholder:"备注信息"},null,8,["modelValue"])]),_:1})]),_:1},8,["model","rules"])]),_:1},8,["modelValue","onClose"]),o(x,{modelValue:e.showReservationDialog,"onUpdate:modelValue":l[17]||(l[17]=t=>e.showReservationDialog=t),title:"保留IP地址",width:"500px",onClose:e.resetReservationForm},{footer:s(()=>[o(b,{onClick:l[16]||(l[16]=t=>e.showReservationDialog=!1)},{default:s(()=>[...l[58]||(l[58]=[m("取消",-1)])]),_:1}),o(b,{type:"warning",onClick:e.submitReservation,loading:e.submitting},{default:s(()=>[...l[59]||(l[59]=[m(" 确认保留 ",-1)])]),_:1},8,["onClick","loading"])]),default:s(()=>[o(w,{ref:"reservationFormRef",model:e.reservationForm,rules:e.reservationRules,"label-width":"100px"},{default:s(()=>[o(g,{label:"IP地址"},{default:s(()=>[o(F,{modelValue:e.reservationForm.ip_address,"onUpdate:modelValue":l[14]||(l[14]=t=>e.reservationForm.ip_address=t),disabled:""},null,8,["modelValue"])]),_:1}),o(g,{label:"保留原因",prop:"reason"},{default:s(()=>[o(F,{modelValue:e.reservationForm.reason,"onUpdate:modelValue":l[15]||(l[15]=t=>e.reservationForm.reason=t),type:"textarea",rows:3,placeholder:"请说明保留原因"},null,8,["modelValue"])]),_:1})]),_:1},8,["model","rules"])]),_:1},8,["modelValue","onClose"]),o(x,{modelValue:e.showReleaseDialog,"onUpdate:modelValue":l[21]||(l[21]=t=>e.showReleaseDialog=t),title:"释放IP地址",width:"500px",onClose:e.resetReleaseForm},{footer:s(()=>[o(b,{onClick:l[20]||(l[20]=t=>e.showReleaseDialog=!1)},{default:s(()=>[...l[60]||(l[60]=[m("取消",-1)])]),_:1}),o(b,{type:"danger",onClick:e.submitRelease,loading:e.submitting},{default:s(()=>[...l[61]||(l[61]=[m(" 确认释放 ",-1)])]),_:1},8,["onClick","loading"])]),default:s(()=>[o(w,{ref:"releaseFormRef",model:e.releaseForm,rules:e.releaseRules,"label-width":"100px"},{default:s(()=>[o(g,{label:"IP地址"},{default:s(()=>[o(F,{modelValue:e.releaseForm.ip_address,"onUpdate:modelValue":l[18]||(l[18]=t=>e.releaseForm.ip_address=t),disabled:""},null,8,["modelValue"])]),_:1}),o(g,{label:"释放原因",prop:"reason"},{default:s(()=>[o(F,{modelValue:e.releaseForm.reason,"onUpdate:modelValue":l[19]||(l[19]=t=>e.releaseForm.reason=t),type:"textarea",rows:3,placeholder:"请说明释放原因"},null,8,["modelValue"])]),_:1})]),_:1},8,["model","rules"])]),_:1},8,["modelValue","onClose"]),o(x,{modelValue:e.showBulkDialog,"onUpdate:modelValue":l[25]||(l[25]=t=>e.showBulkDialog=t),title:"批量操作",width:"600px",onClose:e.resetBulkForm},{footer:s(()=>[o(b,{onClick:l[24]||(l[24]=t=>e.showBulkDialog=!1)},{default:s(()=>[...l[65]||(l[65]=[m("取消",-1)])]),_:1}),o(b,{type:e.getBulkOperationButtonType(),onClick:e.submitBulkOperation,loading:e.submitting,disabled:e.selectedIPs.length===0},{default:s(()=>[...l[66]||(l[66]=[m(" 执行操作 ",-1)])]),_:1},8,["type","onClick","loading","disabled"])]),default:s(()=>[o(w,{ref:"bulkFormRef",model:e.bulkForm,rules:e.bulkRules,"label-width":"100px"},{default:s(()=>[o(g,{label:"操作类型",prop:"operation"},{default:s(()=>[o(ae,{modelValue:e.bulkForm.operation,"onUpdate:modelValue":l[22]||(l[22]=t=>e.bulkForm.operation=t)},{default:s(()=>[o(O,{label:"reserve"},{default:s(()=>[...l[62]||(l[62]=[m("批量保留",-1)])]),_:1}),o(O,{label:"release"},{default:s(()=>[...l[63]||(l[63]=[m("批量释放",-1)])]),_:1}),e.isAdmin?(d(),P(O,{key:0,label:"delete"},{default:s(()=>[...l[64]||(l[64]=[m("批量删除",-1)])]),_:1})):R("",!0)]),_:1},8,["modelValue"])]),_:1}),o(g,{label:"选中IP"},{default:s(()=>[i("div",Wl,[(d(!0),A(J,null,W(e.selectedIPs,t=>(d(),P(u,{key:t.id,closable:"",onClose:M=>e.removeSelectedIP(t)},{default:s(()=>[m(U(t.ip_address),1)]),_:2},1032,["onClose"]))),128)),e.selectedIPs.length===0?(d(),A("div",Xl," 请在表格中选择要操作的IP地址 ")):R("",!0)])]),_:1}),o(g,{label:"操作原因",prop:"reason"},{default:s(()=>[o(F,{modelValue:e.bulkForm.reason,"onUpdate:modelValue":l[23]||(l[23]=t=>e.bulkForm.reason=t),type:"textarea",rows:3,placeholder:"请说明操作原因"},null,8,["modelValue"])]),_:1})]),_:1},8,["model","rules"])]),_:1},8,["modelValue","onClose"]),o(x,{modelValue:e.showDeleteDialog,"onUpdate:modelValue":l[29]||(l[29]=t=>e.showDeleteDialog=t),title:"删除IP地址",width:"500px",onClose:e.resetDeleteForm},{footer:s(()=>[o(b,{onClick:l[28]||(l[28]=t=>e.showDeleteDialog=!1)},{default:s(()=>[...l[68]||(l[68]=[m("取消",-1)])]),_:1}),o(b,{type:"danger",onClick:e.submitDelete,loading:e.submitting},{default:s(()=>[...l[69]||(l[69]=[m(" 确认删除 ",-1)])]),_:1},8,["onClick","loading"])]),default:s(()=>[o(w,{ref:"deleteFormRef",model:e.deleteForm,rules:e.deleteRules,"label-width":"100px"},{default:s(()=>[o(g,{label:"IP地址"},{default:s(()=>[o(F,{modelValue:e.deleteForm.ip_address,"onUpdate:modelValue":l[26]||(l[26]=t=>e.deleteForm.ip_address=t),disabled:""},null,8,["modelValue"])]),_:1}),o(g,{label:"删除原因",prop:"reason"},{default:s(()=>[o(F,{modelValue:e.deleteForm.reason,"onUpdate:modelValue":l[27]||(l[27]=t=>e.deleteForm.reason=t),type:"textarea",rows:3,placeholder:"请说明删除原因"},null,8,["modelValue"])]),_:1}),o(N,{title:"警告",type:"warning",closable:!1,"show-icon":""},{default:s(()=>[...l[67]||(l[67]=[i("p",null,"删除IP地址将永久移除该记录，此操作不可恢复！",-1),i("p",null,"请确认该IP地址未被使用且确实需要删除。",-1)])]),_:1})]),_:1},8,["model","rules"])]),_:1},8,["modelValue","onClose"]),o(x,{modelValue:e.showEditDialog,"onUpdate:modelValue":l[38]||(l[38]=t=>e.showEditDialog=t),title:"编辑IP地址",width:"600px",onClose:e.resetEditForm},{footer:s(()=>[o(b,{onClick:l[37]||(l[37]=t=>e.showEditDialog=!1)},{default:s(()=>[...l[70]||(l[70]=[m("取消",-1)])]),_:1}),o(b,{type:"info",onClick:e.submitEdit,loading:e.submitting},{default:s(()=>[...l[71]||(l[71]=[m(" 确认修改 ",-1)])]),_:1},8,["onClick","loading"])]),default:s(()=>[o(w,{ref:"editFormRef",model:e.editForm,rules:e.editRules,"label-width":"100px"},{default:s(()=>[o(g,{label:"IP地址"},{default:s(()=>[o(F,{modelValue:e.editForm.ip_address,"onUpdate:modelValue":l[30]||(l[30]=t=>e.editForm.ip_address=t),disabled:""},null,8,["modelValue"])]),_:1}),o(g,{label:"MAC地址",prop:"mac_address"},{default:s(()=>[o(F,{modelValue:e.editForm.mac_address,"onUpdate:modelValue":l[31]||(l[31]=t=>e.editForm.mac_address=t),placeholder:"如：00:11:22:33:44:55"},null,8,["modelValue"])]),_:1}),o(g,{label:"使用人",prop:"user_name",required:""},{default:s(()=>[o(F,{modelValue:e.editForm.user_name,"onUpdate:modelValue":l[32]||(l[32]=t=>e.editForm.user_name=t),placeholder:"使用人"},null,8,["modelValue"])]),_:1}),o(g,{label:"设备类型",prop:"device_type",required:""},{default:s(()=>[o(Y,{modelValue:e.editForm.device_type,"onUpdate:modelValue":l[33]||(l[33]=t=>e.editForm.device_type=t),placeholder:"选择设备类型",style:{width:"100%"}},{default:s(()=>[(d(!0),A(J,null,W(e.deviceTypes,t=>(d(),P(j,{key:t.code,label:t.name,value:t.code},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),o(g,{label:"使用部门",prop:"assigned_to",required:""},{default:s(()=>[o(Y,{modelValue:e.editForm.assigned_to,"onUpdate:modelValue":l[34]||(l[34]=t=>e.editForm.assigned_to=t),placeholder:"选择部门",filterable:"","allow-create":"",style:{width:"100%"},"popper-class":"ip-management-select-dropdown",onVisibleChange:e.handleSelectVisibleChange},{default:s(()=>[(d(!0),A(J,null,W(e.departments,t=>(d(),P(j,{key:t,label:t,value:t},null,8,["label","value"]))),128))]),_:1},8,["modelValue","onVisibleChange"])]),_:1}),o(g,{label:"分配时间",prop:"allocated_at"},{default:s(()=>[o(Z,{modelValue:e.editForm.allocated_at,"onUpdate:modelValue":l[35]||(l[35]=t=>e.editForm.allocated_at=t),type:"datetime",placeholder:"选择分配时间",format:"YYYY-MM-DD HH:mm:ss","value-format":"YYYY-MM-DD HH:mm:ss",style:{width:"100%"}},null,8,["modelValue"])]),_:1}),o(g,{label:"描述",prop:"description"},{default:s(()=>[o(F,{modelValue:e.editForm.description,"onUpdate:modelValue":l[36]||(l[36]=t=>e.editForm.description=t),type:"textarea",rows:3,placeholder:"备注信息"},null,8,["modelValue"])]),_:1})]),_:1},8,["model","rules"])]),_:1},8,["modelValue","onClose"])])]),_:1})}const ia=pe(Cl,[["render",Zl],["__scopeId","data-v-f7f425ff"]]);export{ia as default};
