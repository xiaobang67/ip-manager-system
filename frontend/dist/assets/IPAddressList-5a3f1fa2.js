import{m as S,d as Fe,r as y,a as q,o as We,C as He,c,e,w as t,n as I,i as v,D as qe,j as r,F as M,y as P,g as z,G as Be,l as p,x as ne,b as L,H as Ye,p as je,I as Ne,J as Xe,K as V,t as A,z as X,L as Ge,M as re,_ as Je}from"./index-de8d932e.js";import{n as Ke}from"./networkSegment-d69ecc2b.js";import{u as Te}from"./user-ac9e02c0.js";const R={getList(m){return S.get("/v1/ip-addresses",{params:m})},getById(m){return S.get(`/v1/ip-addresses/${m}`)},getByIp(m){return S.get(`/v1/ip-addresses/by-ip/${m}`)},create(m){return S.post("/v1/ip-addresses",m)},update(m,$){return S.put(`/v1/ip-addresses/${m}`,$)},delete(m){return S.delete(`/v1/ip-addresses/${m}`)},allocate(m,$){return S.post(`/v1/ip-addresses/${m}/allocate`,$)},release(m){return S.post(`/v1/ip-addresses/${m}/release`)},getHistory(m){return S.get(`/v1/ip-addresses/${m}/history`)},batchAllocate(m){return S.post("/v1/ip-addresses/batch-allocate",m)},getOSTypes(){return S.get("/v1/ip-addresses/options/os-types")}},Qe={class:"ip-address-list"},Ze={class:"toolbar"},el={class:"toolbar-left"},ll={class:"toolbar-right"},al={key:0},tl={key:1,class:"text-muted"},dl={key:0},sl={class:"text-muted small"},ol={key:1,class:"text-muted"},nl={key:0},rl={key:1,class:"text-muted"},ul={class:"pagination-container"},il=Fe({__name:"IPAddressList",setup(m){const $=y(!1),ee=y([]),B=y([]),E=y([]),Y=y([]),le=y([]),ue=y(!1),G={"Windows Server 2019":"windows_server_2019","Windows Server 2022":"windows_server_2022","Windows 10":"windows_10","Windows 11":"windows_11","Ubuntu 20.04":"ubuntu_20_04","Ubuntu 22.04":"ubuntu_22_04","CentOS 7":"centos_7","CentOS 8":"centos_8","Debian 10":"debian_10","Debian 11":"debian_11","Red Hat Enterprise Linux 8":"redhat_8","Red Hat Enterprise Linux 9":"redhat_9","SUSE Linux Enterprise 15":"suse_15","macOS Monterey":"macos_monterey","macOS Ventura":"macos_ventura","macOS Sonoma":"macos_sonoma","VMware vSphere ESXi 7":"vmware_esxi_7","VMware vSphere ESXi 8":"vmware_esxi_8",其他:"other"};y({device_name:!0,hostname:!1,assigned_user:!0,mac_address:!1,network_segment:!1,purpose:!1,allocated_at:!1});const ae=()=>{ue.value=window.innerWidth<=768},k=q({search:"",network_segment_id:void 0,status:"",assigned_user_id:void 0}),w=q({page:1,size:20,total:0}),F=y(!1),O=y(),J=y(),f=q({user_id:void 0,device_name:"",device_type:"",mac_address:"",hostname:"",os_type:"",purpose:""}),W=y(!1),K=y(),s=q({id:void 0,ip_address:"",network_segment_id:void 0,status:"available",device_name:"",device_type:"",mac_address:"",hostname:"",os_type:"",purpose:"",notes:"",assigned_user_id:void 0,assigned_department_id:void 0,allocated_at:""}),H=y(!1),T=y(),u=q({ip_address:"",network_segment_id:void 0,status:"available",device_name:"",device_type:"",mac_address:"",hostname:"",os_type:"",purpose:"",notes:"",assigned_user_id:void 0,assigned_department_id:void 0}),ie={device_name:[{required:!1,message:"请输入设备名称",trigger:"blur"}],hostname:[{required:!1,message:"请输入主机名",trigger:"blur"}],mac_address:[{pattern:/^([0-9A-Fa-f]{2}[:-]){5}([0-9A-Fa-f]{2})$/,message:"MAC地址格式不正确",trigger:"blur"}],purpose:[{required:!1,message:"请输入用途说明",trigger:"blur"}]},pe={user_id:[{required:!0,message:"请选择分配用户",trigger:"change"}],device_name:[{required:!0,message:"请输入设备名称",trigger:"blur"}]},me={ip_address:[{required:!0,message:"请输入IP地址",trigger:"blur"},{pattern:/^(\d{1,3}\.){3}\d{1,3}$/,message:"IP地址格式不正确",trigger:"blur"}],network_segment_id:[{required:!0,message:"请选择网段",trigger:"change"}],status:[{required:!0,message:"请选择状态",trigger:"change"}]},_e=d=>({available:"success",allocated:"warning",reserved:"danger",blacklisted:"info"})[d]||"info",ve=d=>({available:"可用",allocated:"已分配",reserved:"保留",blacklisted:"黑名单"})[d]||d,fe=d=>new Date(d).toLocaleString("zh-CN"),C=async()=>{$.value=!0;try{const d={skip:(w.page-1)*w.size,limit:w.size,...k};Object.keys(d).forEach(i=>{(d[i]===""||d[i]===void 0)&&delete d[i]});const a=await R.getList(d);ee.value=a}catch(d){I.error("加载数据失败"),console.error(d)}finally{$.value=!1}},be=async()=>{try{const d=await Ke.getList({limit:1e3});B.value=d.items||[]}catch(d){console.error("加载网段列表失败:",d)}},ce=async()=>{Y.value=[{label:"Windows Server 2019",value:"Windows Server 2019"},{label:"Windows Server 2022",value:"Windows Server 2022"},{label:"Windows 10",value:"Windows 10"},{label:"Windows 11",value:"Windows 11"},{label:"Ubuntu 20.04",value:"Ubuntu 20.04"},{label:"Ubuntu 22.04",value:"Ubuntu 22.04"},{label:"CentOS 7",value:"CentOS 7"},{label:"CentOS 8",value:"CentOS 8"},{label:"Debian 10",value:"Debian 10"},{label:"Debian 11",value:"Debian 11"},{label:"Red Hat Enterprise Linux 8",value:"Red Hat Enterprise Linux 8"},{label:"Red Hat Enterprise Linux 9",value:"Red Hat Enterprise Linux 9"},{label:"SUSE Linux Enterprise 15",value:"SUSE Linux Enterprise 15"},{label:"macOS Monterey",value:"macOS Monterey"},{label:"macOS Ventura",value:"macOS Ventura"},{label:"macOS Sonoma",value:"macOS Sonoma"},{label:"VMware vSphere ESXi 7",value:"VMware vSphere ESXi 7"},{label:"VMware vSphere ESXi 8",value:"VMware vSphere ESXi 8"},{label:"其他",value:"其他"}]},j=async d=>{if(!d){E.value=[];return}try{const a=await Te.search({q:d,limit:20});E.value=a}catch(a){console.error("搜索用户失败:",a)}},te=()=>{w.page=1,C()},ge=()=>{Object.assign(k,{search:"",network_segment_id:void 0,status:"",assigned_user_id:void 0}),te()},ye=()=>{O.value=null,H.value=!0,Object.assign(u,{ip_address:"",network_segment_id:void 0,status:"available",device_name:"",device_type:"",mac_address:"",hostname:"",os_type:"",purpose:"",notes:"",assigned_user_id:void 0,assigned_department_id:void 0})},Ve=()=>{if(le.value.length===0){I.warning("请选择要批量分配的IP地址");return}I.info("批量分配功能开发中...")},we=()=>{I.info("导出功能开发中...")},ke=d=>{le.value=d},he=d=>{O.value=d,F.value=!0,Object.assign(f,{user_id:void 0,device_name:"",device_type:"",mac_address:"",hostname:"",os_type:"",purpose:""})},Se=async()=>{if(J.value)try{if(await J.value.validate(),!O.value)return;const d={...f};d.os_type&&(d.os_type=G[d.os_type]||d.os_type),await R.allocate(O.value.id,d),I.success("IP地址分配成功"),F.value=!1,C()}catch(d){console.error("分配IP地址失败:",d)}},Ce=async()=>{if(T.value)try{await T.value.validate();const d={...u};d.os_type&&(d.os_type=G[d.os_type]||d.os_type),await R.create(d),I.success("IP地址添加成功"),H.value=!1,C()}catch(d){console.error("添加IP地址失败:",d)}},Ue=async()=>{if(K.value)try{if(await K.value.validate(),!s.id)return;const d={ip_address:s.ip_address,network_segment_id:s.network_segment_id,status:s.status,device_name:s.device_name,device_type:s.device_type,mac_address:s.mac_address,hostname:s.hostname,os_type:s.os_type,purpose:s.purpose,notes:s.notes,assigned_user_id:s.assigned_user_id,assigned_department_id:s.assigned_department_id,allocated_at:s.allocated_at};d.os_type&&(d.os_type=G[d.os_type]||d.os_type),await R.update(s.id,d),I.success("IP地址修改成功"),W.value=!1,C()}catch(d){console.error("修改IP地址失败:",d)}},xe=async d=>{try{await re.confirm(`确定要释放IP地址 ${d.ip_address} 吗？`,"确认释放",{type:"warning"}),await R.release(d.id),I.success("IP地址释放成功"),C()}catch(a){a!=="cancel"&&console.error("释放IP地址失败:",a)}},Ie=d=>{var a,i,o;O.value=d,W.value=!0,Object.assign(s,{id:d.id,ip_address:d.ip_address,network_segment_id:(a=d.network_segment)==null?void 0:a.id,status:d.status,device_name:d.device_name||"",device_type:d.device_type||"",mac_address:d.mac_address||"",hostname:d.hostname||"",os_type:d.os_type||"",purpose:d.purpose||"",notes:d.notes||"",assigned_user_id:(i=d.assigned_user)==null?void 0:i.id,assigned_department_id:(o=d.assigned_department)==null?void 0:o.id,allocated_at:d.allocated_at||""}),d.assigned_user&&(E.value=[d.assigned_user])},Me=(d,a)=>{switch(d){case"history":I.info("查看使用历史功能开发中...");break;case"delete":Pe(a);break}},Pe=async d=>{try{await re.confirm(`确定要删除IP地址 ${d.ip_address} 吗？`,"确认删除",{type:"warning"}),await R.delete(d.id),I.success("删除成功"),C()}catch(a){a!=="cancel"&&console.error("删除IP地址失败:",a)}},$e=d=>{w.size=d,w.page=1,C()},Ee=d=>{w.page=d,C()};We(()=>{C(),be(),ce(),ae(),window.addEventListener("resize",de)}),He(()=>{window.removeEventListener("resize",de)});const de=()=>{ae()};return(d,a)=>{const i=v("el-input"),o=v("el-form-item"),n=v("el-option"),b=v("el-select"),D=v("el-icon"),g=v("el-button"),N=v("el-form"),Q=v("el-card"),h=v("el-table-column"),se=v("el-tag"),oe=v("el-dropdown-item"),De=v("el-dropdown-menu"),ze=v("el-dropdown"),Ae=v("el-table"),Oe=v("el-pagination"),Z=v("el-dialog"),_=v("el-col"),U=v("el-row"),Le=v("el-date-picker"),Re=qe("loading");return r(),c("div",Qe,[e(Q,{class:"search-card"},{default:t(()=>[e(N,{inline:!0,model:k,class:"search-form"},{default:t(()=>[e(o,{label:"IP地址"},{default:t(()=>[e(i,{modelValue:k.search,"onUpdate:modelValue":a[0]||(a[0]=l=>k.search=l),placeholder:"请输入IP地址、设备名或主机名",clearable:"",style:{width:"200px"}},null,8,["modelValue"])]),_:1}),e(o,{label:"网段"},{default:t(()=>[e(b,{modelValue:k.network_segment_id,"onUpdate:modelValue":a[1]||(a[1]=l=>k.network_segment_id=l),placeholder:"请选择网段",clearable:"",style:{width:"200px"}},{default:t(()=>[(r(!0),c(M,null,P(B.value,l=>(r(),V(n,{key:l.id,label:`${l.name} (${l.network})`,value:l.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),e(o,{label:"状态"},{default:t(()=>[e(b,{modelValue:k.status,"onUpdate:modelValue":a[2]||(a[2]=l=>k.status=l),placeholder:"请选择状态",clearable:"",style:{width:"120px"}},{default:t(()=>[e(n,{label:"可用",value:"available"}),e(n,{label:"已分配",value:"allocated"}),e(n,{label:"保留",value:"reserved"}),e(n,{label:"黑名单",value:"blacklisted"})]),_:1},8,["modelValue"])]),_:1}),e(o,{label:"分配用户"},{default:t(()=>[e(b,{modelValue:k.assigned_user_id,"onUpdate:modelValue":a[3]||(a[3]=l=>k.assigned_user_id=l),placeholder:"请选择用户",clearable:"",filterable:"",remote:"","remote-method":j,style:{width:"150px"}},{default:t(()=>[(r(!0),c(M,null,P(E.value,l=>(r(),V(n,{key:l.id,label:l.real_name,value:l.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),e(o,null,{default:t(()=>[e(g,{type:"primary",onClick:te},{default:t(()=>[e(D,null,{default:t(()=>[e(z(Be))]),_:1}),a[42]||(a[42]=p(" 搜索 ",-1))]),_:1}),e(g,{onClick:ge},{default:t(()=>[e(D,null,{default:t(()=>[e(z(ne))]),_:1}),a[43]||(a[43]=p(" 重置 ",-1))]),_:1})]),_:1})]),_:1},8,["model"])]),_:1}),e(Q,{class:"toolbar-card"},{default:t(()=>[L("div",Ze,[L("div",el,[e(g,{type:"primary",onClick:ye},{default:t(()=>[e(D,null,{default:t(()=>[e(z(Ye))]),_:1}),a[44]||(a[44]=p(" 添加IP地址 ",-1))]),_:1}),e(g,{type:"success",onClick:Ve},{default:t(()=>[e(D,null,{default:t(()=>[e(z(je))]),_:1}),a[45]||(a[45]=p(" 批量分配 ",-1))]),_:1}),e(g,{type:"warning",onClick:we},{default:t(()=>[e(D,null,{default:t(()=>[e(z(Ne))]),_:1}),a[46]||(a[46]=p(" 导出数据 ",-1))]),_:1})]),L("div",ll,[e(g,{onClick:C},{default:t(()=>[e(D,null,{default:t(()=>[e(z(ne))]),_:1}),a[47]||(a[47]=p(" 刷新 ",-1))]),_:1})])])]),_:1}),e(Q,{class:"table-card"},{default:t(()=>[Xe((r(),V(Ae,{data:ee.value,stripe:"",border:"",style:{width:"100%"},onSelectionChange:ke},{default:t(()=>[e(h,{type:"selection",width:"50"}),e(h,{prop:"ip_address",label:"IP地址",width:"140"},{default:t(({row:l})=>[e(se,null,{default:t(()=>[p(A(l.ip_address),1)]),_:2},1024)]),_:1}),e(h,{prop:"status",label:"状态",width:"100"},{default:t(({row:l})=>[e(se,{type:_e(l.status),size:"small"},{default:t(()=>[p(A(ve(l.status)),1)]),_:2},1032,["type"])]),_:1}),e(h,{prop:"device_name",label:"设备名称",width:"120"}),e(h,{prop:"hostname",label:"主机名",width:"120"}),e(h,{prop:"mac_address",label:"MAC地址",width:"140"},{default:t(({row:l})=>[l.mac_address?(r(),c("code",al,A(l.mac_address),1)):(r(),c("span",tl,"-"))]),_:1}),e(h,{label:"分配信息","min-width":"150"},{default:t(({row:l})=>{var x;return[l.assigned_user?(r(),c("div",dl,[L("div",null,A(l.assigned_user.real_name),1),L("div",sl,A((x=l.assigned_department)==null?void 0:x.name),1)])):(r(),c("span",ol,"未分配"))]}),_:1}),e(h,{prop:"network_segment",label:"所属网段","min-width":"120"},{default:t(({row:l})=>{var x;return[p(A((x=l.network_segment)==null?void 0:x.name),1)]}),_:1}),e(h,{prop:"purpose",label:"用途","min-width":"120","show-overflow-tooltip":""}),e(h,{prop:"allocated_at",label:"分配时间",width:"150"},{default:t(({row:l})=>[l.allocated_at?(r(),c("span",nl,A(fe(l.allocated_at)),1)):(r(),c("span",rl,"-"))]),_:1}),e(h,{label:"操作",width:"200",fixed:"right"},{default:t(({row:l})=>[l.status==="available"?(r(),V(g,{key:0,type:"primary",size:"small",onClick:x=>he(l)},{default:t(()=>[...a[48]||(a[48]=[p(" 分配 ",-1)])]),_:2},1032,["onClick"])):X("",!0),l.status==="allocated"?(r(),V(g,{key:1,type:"warning",size:"small",onClick:x=>xe(l)},{default:t(()=>[...a[49]||(a[49]=[p(" 释放 ",-1)])]),_:2},1032,["onClick"])):X("",!0),e(g,{type:"info",size:"small",onClick:x=>Ie(l)},{default:t(()=>[...a[50]||(a[50]=[p(" 编辑 ",-1)])]),_:2},1032,["onClick"]),e(ze,{onCommand:x=>Me(x,l)},{dropdown:t(()=>[e(De,null,{default:t(()=>[e(oe,{command:"history"},{default:t(()=>[...a[52]||(a[52]=[p("使用历史",-1)])]),_:1}),e(oe,{command:"delete",divided:""},{default:t(()=>[...a[53]||(a[53]=[p("删除",-1)])]),_:1})]),_:1})]),default:t(()=>[e(g,{size:"small"},{default:t(()=>[a[51]||(a[51]=p(" 更多",-1)),e(D,null,{default:t(()=>[e(z(Ge))]),_:1})]),_:1})]),_:2},1032,["onCommand"])]),_:1})]),_:1},8,["data"])),[[Re,$.value]]),L("div",ul,[e(Oe,{"current-page":w.page,"onUpdate:currentPage":a[4]||(a[4]=l=>w.page=l),"page-size":w.size,"onUpdate:pageSize":a[5]||(a[5]=l=>w.size=l),"page-sizes":[10,20,50,100,254],total:w.total,layout:"total, sizes, prev, pager, next, jumper",onSizeChange:$e,onCurrentChange:Ee},null,8,["current-page","page-size","total"])])]),_:1}),e(Z,{modelValue:F.value,"onUpdate:modelValue":a[14]||(a[14]=l=>F.value=l),title:"分配IP地址",width:"600px"},{footer:t(()=>[e(g,{onClick:a[13]||(a[13]=l=>F.value=!1)},{default:t(()=>[...a[54]||(a[54]=[p("取消",-1)])]),_:1}),e(g,{type:"primary",onClick:Se},{default:t(()=>[...a[55]||(a[55]=[p("确认分配",-1)])]),_:1})]),default:t(()=>[e(N,{ref_key:"allocateFormRef",ref:J,model:f,rules:pe,"label-width":"100px"},{default:t(()=>[e(o,{label:"IP地址"},{default:t(()=>{var l;return[e(i,{"model-value":(l=O.value)==null?void 0:l.ip_address,disabled:""},null,8,["model-value"])]}),_:1}),e(o,{label:"分配用户",prop:"user_id"},{default:t(()=>[e(b,{modelValue:f.user_id,"onUpdate:modelValue":a[6]||(a[6]=l=>f.user_id=l),placeholder:"请选择用户",filterable:"",remote:"","remote-method":j,style:{width:"100%"}},{default:t(()=>[(r(!0),c(M,null,P(E.value,l=>(r(),V(n,{key:l.id,label:`${l.real_name} (${l.username})`,value:l.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),e(o,{label:"设备名称",prop:"device_name"},{default:t(()=>[e(i,{modelValue:f.device_name,"onUpdate:modelValue":a[7]||(a[7]=l=>f.device_name=l),placeholder:"请输入设备名称"},null,8,["modelValue"])]),_:1}),e(o,{label:"设备类型"},{default:t(()=>[e(b,{modelValue:f.device_type,"onUpdate:modelValue":a[8]||(a[8]=l=>f.device_type=l),placeholder:"请选择设备类型"},{default:t(()=>[e(n,{label:"服务器",value:"server"}),e(n,{label:"工作站",value:"workstation"}),e(n,{label:"打印机",value:"printer"}),e(n,{label:"网络设备",value:"network"}),e(n,{label:"其他",value:"other"})]),_:1},8,["modelValue"])]),_:1}),e(o,{label:"MAC地址"},{default:t(()=>[e(i,{modelValue:f.mac_address,"onUpdate:modelValue":a[9]||(a[9]=l=>f.mac_address=l),placeholder:"请输入MAC地址"},null,8,["modelValue"])]),_:1}),e(o,{label:"主机名"},{default:t(()=>[e(i,{modelValue:f.hostname,"onUpdate:modelValue":a[10]||(a[10]=l=>f.hostname=l),placeholder:"请输入主机名"},null,8,["modelValue"])]),_:1}),e(o,{label:"操作系统"},{default:t(()=>[e(b,{modelValue:f.os_type,"onUpdate:modelValue":a[11]||(a[11]=l=>f.os_type=l),placeholder:"请选择操作系统",style:{width:"100%"},clearable:"",filterable:""},{default:t(()=>[(r(!0),c(M,null,P(Y.value,l=>(r(),V(n,{key:l.value,label:l.label,value:l.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),e(o,{label:"用途说明"},{default:t(()=>[e(i,{modelValue:f.purpose,"onUpdate:modelValue":a[12]||(a[12]=l=>f.purpose=l),type:"textarea",rows:3,placeholder:"请输入用途说明"},null,8,["modelValue"])]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue"]),e(Z,{modelValue:W.value,"onUpdate:modelValue":a[27]||(a[27]=l=>W.value=l),title:"编辑IP地址",width:"700px","close-on-click-modal":!1},{footer:t(()=>[e(g,{onClick:a[26]||(a[26]=l=>W.value=!1)},{default:t(()=>[...a[56]||(a[56]=[p("取消",-1)])]),_:1}),e(g,{type:"primary",onClick:Ue},{default:t(()=>[...a[57]||(a[57]=[p("确认修改",-1)])]),_:1})]),default:t(()=>[e(N,{ref_key:"editFormRef",ref:K,model:s,rules:ie,"label-width":"120px",class:"edit-form"},{default:t(()=>[e(U,{gutter:20},{default:t(()=>[e(_,{span:12},{default:t(()=>[e(o,{label:"IP地址"},{default:t(()=>[e(i,{"model-value":s.ip_address,disabled:""},null,8,["model-value"])]),_:1})]),_:1}),e(_,{span:12},{default:t(()=>[e(o,{label:"网段"},{default:t(()=>[e(b,{modelValue:s.network_segment_id,"onUpdate:modelValue":a[15]||(a[15]=l=>s.network_segment_id=l),placeholder:"请选择网段",style:{width:"100%"},clearable:""},{default:t(()=>[(r(!0),c(M,null,P(B.value,l=>(r(),V(n,{key:l.id,label:`${l.name} (${l.network})`,value:l.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1}),e(U,{gutter:20},{default:t(()=>[e(_,{span:12},{default:t(()=>[e(o,{label:"状态"},{default:t(()=>[e(b,{modelValue:s.status,"onUpdate:modelValue":a[16]||(a[16]=l=>s.status=l),placeholder:"请选择状态",style:{width:"100%"}},{default:t(()=>[e(n,{label:"可用",value:"available"}),e(n,{label:"已分配",value:"allocated"}),e(n,{label:"保留",value:"reserved"}),e(n,{label:"黑名单",value:"blacklisted"})]),_:1},8,["modelValue"])]),_:1})]),_:1}),e(_,{span:12},{default:t(()=>[e(o,{label:"设备名称",prop:"device_name"},{default:t(()=>[e(i,{modelValue:s.device_name,"onUpdate:modelValue":a[17]||(a[17]=l=>s.device_name=l),placeholder:"请输入设备名称",clearable:""},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),e(U,{gutter:20},{default:t(()=>[e(_,{span:12},{default:t(()=>[e(o,{label:"设备类型"},{default:t(()=>[e(b,{modelValue:s.device_type,"onUpdate:modelValue":a[18]||(a[18]=l=>s.device_type=l),placeholder:"请选择设备类型",style:{width:"100%"},clearable:""},{default:t(()=>[e(n,{label:"服务器",value:"server"}),e(n,{label:"工作站",value:"workstation"}),e(n,{label:"打印机",value:"printer"}),e(n,{label:"网络设备",value:"network"}),e(n,{label:"其他",value:"other"})]),_:1},8,["modelValue"])]),_:1})]),_:1}),e(_,{span:12},{default:t(()=>[e(o,{label:"MAC地址",prop:"mac_address"},{default:t(()=>[e(i,{modelValue:s.mac_address,"onUpdate:modelValue":a[19]||(a[19]=l=>s.mac_address=l),placeholder:"请输入MAC地址",clearable:""},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),e(U,{gutter:20},{default:t(()=>[e(_,{span:12},{default:t(()=>[e(o,{label:"主机名",prop:"hostname"},{default:t(()=>[e(i,{modelValue:s.hostname,"onUpdate:modelValue":a[20]||(a[20]=l=>s.hostname=l),placeholder:"请输入主机名",clearable:""},null,8,["modelValue"])]),_:1})]),_:1}),e(_,{span:12},{default:t(()=>[e(o,{label:"操作系统"},{default:t(()=>[e(b,{modelValue:s.os_type,"onUpdate:modelValue":a[21]||(a[21]=l=>s.os_type=l),placeholder:"请选择操作系统",style:{width:"100%"},clearable:"",filterable:""},{default:t(()=>[(r(!0),c(M,null,P(Y.value,l=>(r(),V(n,{key:l.value,label:l.label,value:l.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1}),s.status==="allocated"?(r(),V(U,{key:0,gutter:20},{default:t(()=>[e(_,{span:12},{default:t(()=>[e(o,{label:"分配用户"},{default:t(()=>[e(b,{modelValue:s.assigned_user_id,"onUpdate:modelValue":a[22]||(a[22]=l=>s.assigned_user_id=l),placeholder:"请选择用户",filterable:"",remote:"","remote-method":j,style:{width:"100%"},clearable:""},{default:t(()=>[(r(!0),c(M,null,P(E.value,l=>(r(),V(n,{key:l.id,label:`${l.real_name} (${l.username})`,value:l.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1})]),_:1}),e(_,{span:12},{default:t(()=>[e(o,{label:"分配时间"},{default:t(()=>[e(Le,{modelValue:s.allocated_at,"onUpdate:modelValue":a[23]||(a[23]=l=>s.allocated_at=l),type:"datetime",placeholder:"选择分配时间",style:{width:"100%"},format:"YYYY-MM-DD HH:mm:ss","value-format":"YYYY-MM-DD HH:mm:ss"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1})):X("",!0),e(o,{label:"用途说明",prop:"purpose"},{default:t(()=>[e(i,{modelValue:s.purpose,"onUpdate:modelValue":a[24]||(a[24]=l=>s.purpose=l),type:"textarea",rows:3,placeholder:"请输入用途说明"},null,8,["modelValue"])]),_:1}),e(o,{label:"备注"},{default:t(()=>[e(i,{modelValue:s.notes,"onUpdate:modelValue":a[25]||(a[25]=l=>s.notes=l),type:"textarea",rows:2,placeholder:"请输入备注信息"},null,8,["modelValue"])]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue"]),e(Z,{modelValue:H.value,"onUpdate:modelValue":a[41]||(a[41]=l=>H.value=l),title:"添加IP地址",width:"700px","close-on-click-modal":!1},{footer:t(()=>[e(g,{onClick:a[40]||(a[40]=l=>H.value=!1)},{default:t(()=>[...a[58]||(a[58]=[p("取消",-1)])]),_:1}),e(g,{type:"primary",onClick:Ce},{default:t(()=>[...a[59]||(a[59]=[p("确认添加",-1)])]),_:1})]),default:t(()=>[e(N,{ref_key:"addFormRef",ref:T,model:u,rules:me,"label-width":"120px",class:"add-form"},{default:t(()=>[e(U,{gutter:20},{default:t(()=>[e(_,{span:12},{default:t(()=>[e(o,{label:"IP地址",prop:"ip_address"},{default:t(()=>[e(i,{modelValue:u.ip_address,"onUpdate:modelValue":a[28]||(a[28]=l=>u.ip_address=l),placeholder:"请输入IP地址",clearable:""},null,8,["modelValue"])]),_:1})]),_:1}),e(_,{span:12},{default:t(()=>[e(o,{label:"网段",prop:"network_segment_id"},{default:t(()=>[e(b,{modelValue:u.network_segment_id,"onUpdate:modelValue":a[29]||(a[29]=l=>u.network_segment_id=l),placeholder:"请选择网段",style:{width:"100%"},clearable:""},{default:t(()=>[(r(!0),c(M,null,P(B.value,l=>(r(),V(n,{key:l.id,label:`${l.name} (${l.network})`,value:l.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1}),e(U,{gutter:20},{default:t(()=>[e(_,{span:12},{default:t(()=>[e(o,{label:"状态",prop:"status"},{default:t(()=>[e(b,{modelValue:u.status,"onUpdate:modelValue":a[30]||(a[30]=l=>u.status=l),placeholder:"请选择状态",style:{width:"100%"}},{default:t(()=>[e(n,{label:"可用",value:"available"}),e(n,{label:"已分配",value:"allocated"}),e(n,{label:"保留",value:"reserved"}),e(n,{label:"黑名单",value:"blacklisted"})]),_:1},8,["modelValue"])]),_:1})]),_:1}),e(_,{span:12},{default:t(()=>[e(o,{label:"设备名称"},{default:t(()=>[e(i,{modelValue:u.device_name,"onUpdate:modelValue":a[31]||(a[31]=l=>u.device_name=l),placeholder:"请输入设备名称",clearable:""},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),e(U,{gutter:20},{default:t(()=>[e(_,{span:12},{default:t(()=>[e(o,{label:"设备类型"},{default:t(()=>[e(b,{modelValue:u.device_type,"onUpdate:modelValue":a[32]||(a[32]=l=>u.device_type=l),placeholder:"请选择设备类型",style:{width:"100%"},clearable:""},{default:t(()=>[e(n,{label:"服务器",value:"server"}),e(n,{label:"工作站",value:"workstation"}),e(n,{label:"打印机",value:"printer"}),e(n,{label:"网络设备",value:"network"}),e(n,{label:"其他",value:"other"})]),_:1},8,["modelValue"])]),_:1})]),_:1}),e(_,{span:12},{default:t(()=>[e(o,{label:"MAC地址"},{default:t(()=>[e(i,{modelValue:u.mac_address,"onUpdate:modelValue":a[33]||(a[33]=l=>u.mac_address=l),placeholder:"请输入MAC地址",clearable:""},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),e(U,{gutter:20},{default:t(()=>[e(_,{span:12},{default:t(()=>[e(o,{label:"主机名"},{default:t(()=>[e(i,{modelValue:u.hostname,"onUpdate:modelValue":a[34]||(a[34]=l=>u.hostname=l),placeholder:"请输入主机名",clearable:""},null,8,["modelValue"])]),_:1})]),_:1}),e(_,{span:12},{default:t(()=>[e(o,{label:"操作系统"},{default:t(()=>[e(b,{modelValue:u.os_type,"onUpdate:modelValue":a[35]||(a[35]=l=>u.os_type=l),placeholder:"请选择操作系统",style:{width:"100%"},clearable:"",filterable:""},{default:t(()=>[(r(!0),c(M,null,P(Y.value,l=>(r(),V(n,{key:l.value,label:l.label,value:l.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1}),u.status==="allocated"?(r(),V(U,{key:0,gutter:20},{default:t(()=>[e(_,{span:12},{default:t(()=>[e(o,{label:"分配用户"},{default:t(()=>[e(b,{modelValue:u.assigned_user_id,"onUpdate:modelValue":a[36]||(a[36]=l=>u.assigned_user_id=l),placeholder:"请选择用户",filterable:"",remote:"","remote-method":j,style:{width:"100%"},clearable:""},{default:t(()=>[(r(!0),c(M,null,P(E.value,l=>(r(),V(n,{key:l.id,label:`${l.real_name} (${l.username})`,value:l.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1})]),_:1}),e(_,{span:12},{default:t(()=>[e(o,{label:"分配部门"},{default:t(()=>[e(b,{modelValue:u.assigned_department_id,"onUpdate:modelValue":a[37]||(a[37]=l=>u.assigned_department_id=l),placeholder:"请选择部门",style:{width:"100%"},clearable:""},null,8,["modelValue"])]),_:1})]),_:1})]),_:1})):X("",!0),e(o,{label:"用途说明"},{default:t(()=>[e(i,{modelValue:u.purpose,"onUpdate:modelValue":a[38]||(a[38]=l=>u.purpose=l),type:"textarea",rows:3,placeholder:"请输入用途说明"},null,8,["modelValue"])]),_:1}),e(o,{label:"备注"},{default:t(()=>[e(i,{modelValue:u.notes,"onUpdate:modelValue":a[39]||(a[39]=l=>u.notes=l),type:"textarea",rows:2,placeholder:"请输入备注信息"},null,8,["modelValue"])]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue"])])}}});const vl=Je(il,[["__scopeId","data-v-a89f473a"]]);export{vl as default};
