import{m as w,d as F,a as S,r as q,o as z,c as m,e as s,w as e,h as E,n as C,i as r,j as g,b as t,g as n,p as A,t as o,q as I,s as P,v as O,x as L,F as U,y as G,z as H,l as f,A as J,B as K,_ as Q}from"./index-de8d932e.js";const D={getStats(){return w.get("/api/v1/dashboard/stats")},getRecentActivities(y=10){return w.get("/api/v1/dashboard/recent-activities",{params:{limit:y}})}},W={class:"dashboard"},X={class:"stat-item"},Y={class:"stat-icon networks"},Z={class:"stat-content"},$={class:"stat-value"},tt={class:"stat-item"},st={class:"stat-icon ips"},et={class:"stat-content"},at={class:"stat-value"},lt={class:"stat-item"},ot={class:"stat-icon users"},it={class:"stat-content"},dt={class:"stat-value"},nt={class:"stat-item"},ct={class:"stat-icon departments"},_t={class:"stat-content"},rt={class:"stat-value"},ut={class:"chart-container",style:{height:"300px"}},vt={class:"ip-usage-chart"},pt={class:"usage-item"},mt={class:"usage-value"},gt={class:"usage-percent"},ft={class:"usage-item"},ht={class:"usage-value"},bt={class:"usage-percent"},xt={class:"usage-item"},yt={class:"usage-value"},kt={class:"usage-percent"},wt={class:"card-header"},Ct={class:"activity-list"},At={class:"activity-icon"},It={class:"activity-content"},Pt={class:"activity-title"},Dt={class:"activity-time"},Mt={key:0,class:"empty-activities"},Nt={class:"quick-actions"},Rt=F({__name:"Dashboard",setup(y){const v=E(),l=S({total_segments:0,total_ips:0,allocated_ips:0,available_ips:0,reserved_ips:0,total_users:0,total_departments:0}),p=q([]),k=async()=>{try{const i=await D.getRecentActivities(5);p.value=i}catch(i){console.error("加载最近活动失败:",i),p.value=[{id:1,title:"IP地址 192.168.1.100 已分配给用户张三",time:"2分钟前"},{id:2,title:"新增网段 192.168.2.0/24",time:"10分钟前"},{id:3,title:"用户李四的IP地址已释放",time:"1小时前"},{id:4,title:"保留地址 192.168.1.1 即将过期",time:"2小时前"}]}},h=(i,a)=>a===0?"0":(i/a*100).toFixed(1),M=async()=>{try{const i=await D.getStats();Object.assign(l,i)}catch(i){console.error("加载仪表盘数据失败:",i),C.error("加载仪表盘数据失败"),Object.assign(l,{total_segments:0,total_ips:0,allocated_ips:0,available_ips:0,reserved_ips:0,total_users:0,total_departments:0})}},N=async()=>{await k(),C.success("活动数据已刷新")},R=()=>{v.push("/ip-management/addresses")},T=()=>{v.push("/ip-management/segments")},B=()=>{v.push("/ip-management/reserved")},V=()=>{v.push("/organization/users")};return z(()=>{M(),k()}),(i,a)=>{const d=r("el-icon"),c=r("el-card"),_=r("el-col"),b=r("el-row"),u=r("el-button"),j=r("el-empty");return g(),m("div",W,[s(b,{gutter:20},{default:e(()=>[s(_,{xs:12,sm:12,md:6,lg:6,xl:6},{default:e(()=>[s(c,{class:"stat-card"},{default:e(()=>[t("div",X,[t("div",Y,[s(d,null,{default:e(()=>[s(n(A))]),_:1})]),t("div",Z,[t("div",$,o(l.total_segments),1),a[0]||(a[0]=t("div",{class:"stat-label"},"网段总数",-1))])])]),_:1})]),_:1}),s(_,{xs:12,sm:12,md:6,lg:6,xl:6},{default:e(()=>[s(c,{class:"stat-card"},{default:e(()=>[t("div",tt,[t("div",st,[s(d,null,{default:e(()=>[s(n(I))]),_:1})]),t("div",et,[t("div",at,o(l.total_ips),1),a[1]||(a[1]=t("div",{class:"stat-label"},"IP地址总数",-1))])])]),_:1})]),_:1}),s(_,{xs:12,sm:12,md:6,lg:6,xl:6},{default:e(()=>[s(c,{class:"stat-card"},{default:e(()=>[t("div",lt,[t("div",ot,[s(d,null,{default:e(()=>[s(n(P))]),_:1})]),t("div",it,[t("div",dt,o(l.total_users),1),a[2]||(a[2]=t("div",{class:"stat-label"},"用户总数",-1))])])]),_:1})]),_:1}),s(_,{xs:12,sm:12,md:6,lg:6,xl:6},{default:e(()=>[s(c,{class:"stat-card"},{default:e(()=>[t("div",nt,[t("div",ct,[s(d,null,{default:e(()=>[s(n(O))]),_:1})]),t("div",_t,[t("div",rt,o(l.total_departments),1),a[3]||(a[3]=t("div",{class:"stat-label"},"部门总数",-1))])])]),_:1})]),_:1})]),_:1}),s(b,{gutter:20,style:{"margin-top":"20px"}},{default:e(()=>[s(_,{xs:24,sm:24,md:12,lg:12,xl:12},{default:e(()=>[s(c,null,{header:e(()=>[...a[4]||(a[4]=[t("div",{class:"card-header"},[t("span",null,"IP地址使用情况")],-1)])]),default:e(()=>[t("div",ut,[t("div",vt,[t("div",pt,[a[5]||(a[5]=t("div",{class:"usage-label"},[t("div",{class:"usage-dot available"}),t("span",null,"可用")],-1)),t("div",mt,o(l.available_ips),1),t("div",gt,o(h(l.available_ips,l.total_ips))+"% ",1)]),t("div",ft,[a[6]||(a[6]=t("div",{class:"usage-label"},[t("div",{class:"usage-dot allocated"}),t("span",null,"已分配")],-1)),t("div",ht,o(l.allocated_ips),1),t("div",bt,o(h(l.allocated_ips,l.total_ips))+"% ",1)]),t("div",xt,[a[7]||(a[7]=t("div",{class:"usage-label"},[t("div",{class:"usage-dot reserved"}),t("span",null,"已保留")],-1)),t("div",yt,o(l.reserved_ips),1),t("div",kt,o(h(l.reserved_ips,l.total_ips))+"% ",1)])])])]),_:1})]),_:1}),s(_,{xs:24,sm:24,md:12,lg:12,xl:12},{default:e(()=>[s(c,null,{header:e(()=>[t("div",wt,[a[8]||(a[8]=t("span",null,"最近活动",-1)),s(u,{text:"",onClick:N},{default:e(()=>[s(d,null,{default:e(()=>[s(n(L))]),_:1})]),_:1})])]),default:e(()=>[t("div",Ct,[(g(!0),m(U,null,G(p.value,x=>(g(),m("div",{key:x.id,class:"activity-item"},[t("div",At,[s(d,null,{default:e(()=>[s(n(K))]),_:1})]),t("div",It,[t("div",Pt,o(x.title),1),t("div",Dt,o(x.time),1)])]))),128)),p.value.length===0?(g(),m("div",Mt,[s(j,{description:"暂无活动记录"})])):H("",!0)])]),_:1})]),_:1})]),_:1}),s(b,{gutter:20,style:{"margin-top":"20px"}},{default:e(()=>[s(_,{xs:24,sm:24,md:24,lg:24,xl:24},{default:e(()=>[s(c,null,{header:e(()=>[...a[9]||(a[9]=[t("div",{class:"card-header"},[t("span",null,"快速操作")],-1)])]),default:e(()=>[t("div",Nt,[s(u,{type:"primary",onClick:R},{default:e(()=>[s(d,null,{default:e(()=>[s(n(I))]),_:1}),a[10]||(a[10]=f(" IP地址管理 ",-1))]),_:1}),s(u,{type:"success",onClick:T},{default:e(()=>[s(d,null,{default:e(()=>[s(n(A))]),_:1}),a[11]||(a[11]=f(" 网段管理 ",-1))]),_:1}),s(u,{type:"warning",onClick:B},{default:e(()=>[s(d,null,{default:e(()=>[s(n(J))]),_:1}),a[12]||(a[12]=f(" 地址保留 ",-1))]),_:1}),s(u,{type:"info",onClick:V},{default:e(()=>[s(d,null,{default:e(()=>[s(n(P))]),_:1}),a[13]||(a[13]=f(" 用户管理 ",-1))]),_:1})])]),_:1})]),_:1})]),_:1})])}}});const Bt=Q(Rt,[["__scopeId","data-v-a8ca33d6"]]);export{Bt as default};
