import{d as h,u as w,r as _,a as y,o as x,c as V,b as s,e as o,w as l,f as k,g as L,h as R,i as c,j as S,k as f,l as C,t as F,E as q,_ as z}from"./index-de8d932e.js";const B={class:"login-container"},E={class:"login-box"},I=h({__name:"Login",setup(K){const n=R(),g=w(),i=_(),r=_(!1),a=y({username:"",password:""}),v={username:[{required:!0,message:"请输入用户名",trigger:"blur"},{min:3,max:50,message:"用户名长度在 3 到 50 个字符",trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"},{min:6,message:"密码长度不能少于 6 个字符",trigger:"blur"}]},t=async()=>{if(i.value)try{if(await i.value.validate(),r.value=!0,await g.login(a)){const e=n.currentRoute.value.query.redirect;n.push(e||"/")}}catch(u){console.error("登录表单验证失败:",u)}finally{r.value=!1}};return x(()=>{g.isLoggedIn&&n.push("/")}),(u,e)=>{const m=c("el-input"),d=c("el-form-item"),b=c("el-button");return S(),V("div",B,[s("div",E,[e[2]||(e[2]=s("div",{class:"login-header"},[s("h1",null,"OST内部IP地址管理系统"),s("p",null,"请使用您的账户登录")],-1)),o(L(q),{ref_key:"loginFormRef",ref:i,model:a,rules:v,class:"login-form",onSubmit:k(t,["prevent"])},{default:l(()=>[o(d,{prop:"username"},{default:l(()=>[o(m,{modelValue:a.username,"onUpdate:modelValue":e[0]||(e[0]=p=>a.username=p),placeholder:"请输入用户名",size:"large","prefix-icon":"User",clearable:"",onKeyup:f(t,["enter"])},null,8,["modelValue"])]),_:1}),o(d,{prop:"password"},{default:l(()=>[o(m,{modelValue:a.password,"onUpdate:modelValue":e[1]||(e[1]=p=>a.password=p),type:"password",placeholder:"请输入密码",size:"large","prefix-icon":"Lock","show-password":"",clearable:"",onKeyup:f(t,["enter"])},null,8,["modelValue"])]),_:1}),o(d,null,{default:l(()=>[o(b,{type:"primary",size:"large",loading:r.value,class:"login-button",onClick:t},{default:l(()=>[C(F(r.value?"登录中...":"登录"),1)]),_:1},8,["loading"])]),_:1})]),_:1},8,["model"]),e[3]||(e[3]=s("div",{class:"login-footer"},[s("p",{class:"version"},"版本 v1.0.0")],-1))]),e[4]||(e[4]=s("div",{class:"login-bg"},[s("div",{class:"bg-shape shape-1"}),s("div",{class:"bg-shape shape-2"}),s("div",{class:"bg-shape shape-3"})],-1))])}}});const U=z(I,[["__scopeId","data-v-3ad0d9d7"]]);export{U as default};
